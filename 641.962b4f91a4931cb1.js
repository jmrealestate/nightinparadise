"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[641],{4641:(x,m,o)=>{o.r(m),o.d(m,{ReviewsModule:()=>Y});var u=o(177),h=o(2422),t=o(5351),v=o(9334),p=o(5526),d=o(3524),g=o(7062),f=o(6977),R=o(6697),_=o(6933),b=o(9417),a=o(8103),C=o(1335),e=o(7705),l=o(1694),c=o(4848);const D=function(){return{icon:"delete",ripple:!0}};function k(n,I){if(1&n){const i=e.RV6();e.j41(0,"shared-icon",3),e.bIt("click",function(){e.eBV(i);const r=e.XpG();return e.Njj(r.onDelete())}),e.k0s()}2&n&&e.Y8G("config",e.lJ4(1,D))}const $=function(){return{icon:"remove_red_eye",ripple:!0}};let A=(()=>{class n{constructor(i){this._reviewService=i,this.isAdmin=(0,_.o)(a.m.admin)}agInit(i){this.cellValue=this.getValueToDisplay(i)}refresh(i){return this.cellValue=this.getValueToDisplay(i),!0}onInfo(){this._reviewService.changes$.next({action:"view-details",customer:this.rowValue})}onDelete(){this._reviewService.changes$.next({customer:this.rowValue,action:"delete"})}getValueToDisplay(i){return this.rowValue=i.data,i.valueFormatted?i.valueFormatted:i.value}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(l.H))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["total-value-component"]],decls:3,vars:3,consts:[[1,"h-100","w-100","d-flex","align-items-center","justify-content-center"],[1,"cursor-pointer",3,"config","click"],["class","ms-3 cursor-pointer",3,"config","click",4,"ngIf"],[1,"ms-3","cursor-pointer",3,"config","click"]],template:function(s,r){1&s&&(e.j41(0,"div",0)(1,"shared-icon",1),e.bIt("click",function(){return r.onInfo()}),e.k0s(),e.DNE(2,k,1,2,"shared-icon",2),e.k0s()),2&s&&(e.R7$(1),e.Y8G("config",e.lJ4(2,$)),e.R7$(1),e.Y8G("ngIf",r.isAdmin))},dependencies:[u.bT,c.R],styles:["button[_ngcontent-%COMP%]{border:none;background-color:inherit}"]})}return n})();var F=o(9879);function P(n,I){if(1&n&&(e.j41(0,"div",2)(1,"ul",3)(2,"li",4),e.EFF(3),e.k0s(),e.j41(4,"li",4),e.EFF(5),e.k0s(),e.j41(6,"li",4),e.EFF(7),e.k0s(),e.j41(8,"li",4),e.EFF(9),e.k0s(),e.j41(10,"li",4),e.EFF(11),e.k0s(),e.j41(12,"li",4),e.EFF(13),e.k0s(),e.j41(14,"li",4),e.EFF(15),e.k0s(),e.j41(16,"li",4),e.EFF(17),e.k0s(),e.j41(18,"li",4),e.EFF(19),e.k0s()()()),2&n){const i=e.XpG();e.R7$(3),e.SpI("Customer Name: ",i.data.name,""),e.R7$(2),e.SpI("Experience: ",i.data.experience," / 5 stars"),e.R7$(2),e.SpI("Cleanliness: ",i.data.cleanliness," / 5 stars"),e.R7$(2),e.SpI("Comfort: ",i.data.comfort," / 5 stars"),e.R7$(2),e.SpI("Amenities: ",i.data.amenities," / 5 stars"),e.R7$(2),e.SpI(" Customer Service: ",i.data.customerService," / 5 stars "),e.R7$(2),e.SpI("Recommend: ",i.data.recommend?"Yes":"No",""),e.R7$(2),e.SpI(" Improvement: ",i.data.improvement?i.data.improvement:"N/A"," "),e.R7$(2),e.SpI(" Comments: ",i.data.comments?i.data.comments:"N/A"," ")}}const W=function(){return{title:"Review"}};let j=(()=>{class n{constructor(i,s){this.data=i,this._dialogRef=s}handleDialogActions(i){(!i||"ok"===i||"cancel"===i)&&this.closeDialog()}changeDate(i){return(0,l.n)(i)}closeDialog(){this._dialogRef.close()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(t.Vh),e.rXU(t.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-review-popup"]],decls:2,vars:3,consts:[[3,"config","btnClicked"],["class","container py-2 cd-max",4,"ngIf"],[1,"container","py-2","cd-max"],[1,"row"],[1,"cs-r"]],template:function(s,r){1&s&&(e.j41(0,"shared-confirm-body",0),e.bIt("btnClicked",function(y){return r.handleDialogActions(y)}),e.DNE(1,P,20,9,"div",1),e.k0s()),2&s&&(e.Y8G("config",e.lJ4(2,W)),e.R7$(1),e.Y8G("ngIf",r.data))},dependencies:[u.bT,F.m],styles:[".cs-r[_ngcontent-%COMP%]{padding:7px;font-size:16px}"]})}return n})();var S=o(9751),T=o(8895),B=o(6983);const M=function(){return{icon:"search",color:"var(--primary-color)"}},N=function(n){return{label:"Search",prefixIcon:n}},G=[{path:"",component:(()=>{class n extends C.${constructor(i,s,r){super(s),this._dialog=i,this._navService=s,this._reviewService=r,this.buttons=[],this.isAdmin=(0,_.o)(a.m.admin),this.innerWidth=window.innerWidth,this.searchControl=new b.MJ(""),this.columnDefs=this.getCols(),this.defaultColDef={initialWidth:100,sortable:!0,resizable:!0,filter:!0,flex:1,minWidth:100}}ngOnInit(){this._reviewService.getAllReviews(),this.Navbar_Update({show:!0,back:!1,title:this.NAV_NAMES.REVIEWS.children.WHOLESALE.name,buttons:this.buttons}),this.NavButtons$.pipe((0,f.Q)(this.__unsubscribe$)).subscribe(i=>{}),this.searchControl.valueChanges.pipe((0,f.Q)(this.__unsubscribe$)).subscribe(i=>{this.onFilterTextBoxChanged(i)}),this._reviewService.changes$.pipe((0,f.Q)(this.__unsubscribe$)).subscribe(i=>{"view-details"===i.action?this.openCustomerReservations(i.customer):"delete"===i.action&&i.customer&&this.onDelete(i.customer)})}ngOnDestroy(){super.ngOnDestroy(),this._reviewService.changes$.next({})}onGridReady(i){this.gridApi=i.api,this._reviewService.customers$.pipe((0,f.Q)(this.__unsubscribe$)).subscribe(s=>this.rowData=s)}onFilterTextBoxChanged(i){this.gridApi.setQuickFilter(i)}openCustomerReservations(i){this._dialog.open(j,{width:"95vw",maxWidth:"600px",maxHeight:"95vh",disableClose:!0,restoreFocus:!1,data:i})}onDelete(i){this._dialog.open(S.r,{width:"95vw",maxWidth:"500px",disableClose:!0,restoreFocus:!1,autoFocus:!1,data:{title:"Confirm Delete",bodyMessage:"Are you sure you want to delete this review?",showYesNo:!0,showOk:!1}}).afterClosed().pipe((0,R.s)(1)).subscribe(s=>{s&&"yes"===s&&i?._id&&this._reviewService.deleteReview(i)})}getCols(){return[{headerName:"Customer Name",field:"name",minWidth:150},{headerName:"Experience",field:"experience",minWidth:150,maxWidth:150,width:150},{headerName:"Cleanliness",field:"cleanliness",minWidth:150,maxWidth:150,width:150},{headerName:"Comfort",field:"comfort",minWidth:150,maxWidth:150,width:150},{headerName:"Amenities",field:"amenities",minWidth:150,maxWidth:150,width:150},{headerName:"Customer Service",field:"customerService",minWidth:150,maxWidth:150,width:150},{headerName:"Date",field:"createdAt",valueFormatter:s=>function V(n){const i=n.split("T")[0].split("-");return`${i[2]}/${i[1]}/${i[0]}`}(s.data.createdAt),width:130,minWidth:130,maxWidth:130},{headerName:"",cellRenderer:A,width:this.isAdmin?100:60,minWidth:this.isAdmin?100:60,maxWidth:this.isAdmin?100:60,sortable:!1,filter:!1,resizable:!1,pinned:"right"}]}onWindowResize(i){this.innerWidth=window.innerWidth}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(t.bZ),e.rXU(T.F),e.rXU(l.H))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-reviews"]],hostBindings:function(s,r){1&s&&e.bIt("resize",function(){return r.onWindowResize()},!1,e.tSv)},features:[e.Vt3],decls:3,vars:15,consts:[[2,"max-width","300px"],[3,"config","control"],[2,"width","100%","height","calc(100vh - 255px)","min-height","400px",3,"rowHeight","columnDefs","defaultColDef","rowData","pagination","paginationAutoPageSize","gridReady"]],template:function(s,r){1&s&&(e.j41(0,"div",0),e.nrm(1,"shared-input",1),e.k0s(),e.j41(2,"ag-grid-angular",2),e.bIt("gridReady",function(y){return r.onGridReady(y)}),e.k0s()),2&s&&(e.R7$(1),e.Y8G("config",e.eq3(13,N,e.lJ4(12,M)))("control",r.searchControl),e.R7$(1),e.AVh("ag-theme-alpine","light"===r.$theme)("ag-theme-alpine-dark","dark"===r.$theme),e.Y8G("rowHeight",35)("columnDefs",r.columnDefs)("defaultColDef",r.defaultColDef)("rowData",r.rowData)("pagination",r.innerWidth>700)("paginationAutoPageSize",!0))},dependencies:[d.xs,B.S]})}return n})()}];let U=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#i=this.\u0275inj=e.G2t({imports:[g.iI.forChild(G),g.iI]})}return n})(),Y=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#i=this.\u0275inj=e.G2t({imports:[u.MD,d.$V,U,h.m,t.hM,v.H,p.V]})}return n})()},9751:(x,m,o)=>{o.d(m,{r:()=>b});var u=o(5351),h=o(1349),t=o(7705),v=o(177),p=o(4848),d=o(8930);function g(a,C){if(1&a&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&a){const e=t.XpG();t.R7$(1),t.SpI(" ",e.data.bodyMessage," ")}}function f(a,C){if(1&a){const e=t.RV6();t.j41(0,"div",8)(1,"div",9)(2,"shared-button",10),t.bIt("btnClicked",function(){t.eBV(e);const c=t.XpG();return t.Njj(c.yesClicked())}),t.k0s()(),t.j41(3,"div",9)(4,"shared-button",10),t.bIt("btnClicked",function(){t.eBV(e);const c=t.XpG();return t.Njj(c.noClicked())}),t.k0s()()()}if(2&a){const e=t.XpG();t.R7$(2),t.Y8G("config",e.yesButtonConfig),t.R7$(2),t.Y8G("config",e.noButtonConfig)}}function R(a,C){if(1&a){const e=t.RV6();t.j41(0,"div",11)(1,"shared-button",10),t.bIt("btnClicked",function(){t.eBV(e);const c=t.XpG();return t.Njj(c.okClicked())}),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(1),t.Y8G("config",e.okButtonConfig)}}const _=function(){return{icon:"close",color:"var(--text-color)"}};let b=(()=>{class a{constructor(e,l){this.dialogRef=e,this.data=l,this.appName=(0,h.$L)("constants",!0)?.appName?(0,h.$L)("constants",!0)?.appName:"P.O.S",this.okButtonConfig={label:"OK",type:"button",color:"primary",matAttribute:"mat-raised-button"},this.yesButtonConfig={label:"Yes",color:"primary",matAttribute:"mat-raised-button",takeFullWidth:!0},this.noButtonConfig={label:"No",color:"primary",matAttribute:"mat-raised-button",takeFullWidth:!0}}yesClicked(){this.dialogRef.close("yes")}noClicked(){this.dialogRef.close("no")}okClicked(){this.dialogRef.close("ok")}closeClicked(){this.dialogRef.close()}static#e=this.\u0275fac=function(l){return new(l||a)(t.rXU(u.CP),t.rXU(u.Vh))};static#t=this.\u0275cmp=t.VBU({type:a,selectors:[["ng-component"]],decls:11,vars:6,consts:[[2,"border-radius","7px 7px 0 0"],[1,"cs-pop-title","d-flex","justify-content-between","py-2","px-4","text-light","align-items-center"],[2,"cursor","pointer",3,"config","click"],[2,"display","flex","border-top","1px solid gainsboro","margin","0px"],[1,"text-center","py-2","px-2",2,"min-height","70px"],[4,"ngIf"],["class","py-2 align-items-center justify-content-center d-flex",4,"ngIf"],["class","py-2 text-center",4,"ngIf"],[1,"py-2","align-items-center","justify-content-center","d-flex"],[1,"mx-1",2,"width","120px"],[3,"config","btnClicked"],[1,"py-2","text-center"]],template:function(l,c){1&l&&(t.j41(0,"div",0)(1,"div",1)(2,"div"),t.EFF(3),t.k0s(),t.j41(4,"shared-icon",2),t.bIt("click",function(){return c.closeClicked()}),t.k0s()(),t.nrm(5,"div",3),t.j41(6,"div",4),t.DNE(7,g,2,1,"div",5),t.k0s(),t.nrm(8,"div",3),t.DNE(9,f,5,2,"div",6),t.DNE(10,R,2,1,"div",7),t.k0s()),2&l&&(t.R7$(3),t.JRh(c.data.title?c.data.title:c.appName),t.R7$(1),t.Y8G("config",t.lJ4(5,_)),t.R7$(3),t.Y8G("ngIf",c.data.bodyMessage),t.R7$(2),t.Y8G("ngIf",1==c.data.showYesNo),t.R7$(1),t.Y8G("ngIf",1==c.data.showOk))},dependencies:[v.bT,p.R,d.Q],styles:[".cs-pop-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600}.cs-pop-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:var(--text-color)}"]})}return a})()},6933:(x,m,o)=>{o.d(m,{o:()=>t});var u=o(8103),h=o(1349);function t(v){let d=(0,h.$L)("roles",!0)||[];return!("object"!=typeof d||!Array.isArray(d)||!d.includes(v)&&!d.includes(u.m.admin))}}}]);