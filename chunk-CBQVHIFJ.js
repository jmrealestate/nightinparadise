import{a as k,b as R}from"./chunk-5EU4ND3L.js";import"./chunk-QHM7Z56U.js";import{a,b as G}from"./chunk-DQYI455W.js";import{c as A,d as T}from"./chunk-PVQPB666.js";import{a as D,b as M}from"./chunk-4LG2RD24.js";import"./chunk-UOQFKZ5Q.js";import{a as C,b as P}from"./chunk-ITSNA3JG.js";import{a as B,b as F}from"./chunk-DKBVEZ2J.js";import{Ca as b,Ua as y,Wa as O,ma as S,oa as L}from"./chunk-OX4MXTMU.js";import{$b as w,Ab as h,Fb as m,Ga as u,Lb as f,Sb as x,Vc as v,a as r,b as l,ba as E,e as N,la as n,n as d,pa as p,sc as _,tb as g}from"./chunk-LUSYJMV7.js";function U(o,t){if(o&1&&x(0,"ks-basic-grid",0),o&2){let c=w();m("config",c.gridConfig)("refresh$",c.refresh$)}}var ee,$=N(()=>{v();L();O();E();F();M();P();T();R();G();v();ee=(()=>{let t=class t{constructor(){this._destroyRef=n(u),this._dialog=n(b),this._navService=n(C),this._configService=n(D),this._sessionService=n(A),this._bungalowsService=n(k),this.refresh$=new d,this._canAdd=this._sessionService.checkAccess(a.ADD_BUNGALOW),this._canEdit=this._sessionService.checkAccess(a.EDIT_BUNGALOW)}ngOnInit(){this._navService.updateNav({show:!0,back:!1,title:B.LAYOUT.children.BUNGALOWS.name,buttons:[{label:{text:"Add Bungalow"},prefixIcon:{icon:"icon_plus_circle"},hide:!this._canAdd,onClick:()=>this._openBungalowPopup()}]}),this._initializeGrid(),this._bungalowsService.getAllBungalows()}ngAfterViewInit(){this._bungalowsService.bungalow$.pipe(S(this._destroyRef)).subscribe(e=>{this.refresh$.next({data:e})})}_initializeGrid(){this.gridConfig={data:g([]),defaultPagination:100,maxTableHeight:this._configService.appConfig.maxTableHeightWithSearch,noDataMessage:{text:"No Bungalows Found"},features:{showSearch:!0},columns:[{field:"name",title:"Bungalow Name",type:"string",extraStyles:{"min-width":"170px","max-width":"300px",width:"170px"}},{field:"description",title:"Description",type:"string",extraStyles:{"min-width":"100px"}},{field:"active",title:"Active",type:"chip",extraStyles:{"min-width":"100px","max-width":"100px",width:"100px"},truthy:{false:"No",true:"Yes"},setChipClass:e=>e.active?"rounded rounded-5 px-3 py-1 text-bg-success":"rounded rounded-5 px-3 py-1 text-bg-danger"},{field:"createdAt",title:"Created At",type:"date",dateFormat:"dd/MM/yyyy - HH:mm:ss a",extraStyles:{"min-width":"170px","max-width":"170px",width:"170px"}}],actionsColumn:l(r({},this._configService.getActionColumn(1)),{enabled:this._canEdit,buttons:[{prefixIcon:{icon:"icon_edit"},label:{text:"Edit"},onClickFn:e=>this._openBungalowPopup(e),matType:"mat-icon-button"}]})}}_openBungalowPopup(e){let s={hideClearButton:!0,title:{text:e?"Edit Bungalow":"Add Bungalow"},form:{value:e,fields:[{name:"name",label:{text:"Bungalow Name"},type:"text",required:!0,maxLength:30},{name:"description",label:{text:"Description"},type:"text",maxLength:100},{name:"active",type:"checkbox",label:{text:"Active"}}]},beforeCloseObservable:i=>e?this._bungalowsService.updateBungalows(r(r({},e),i)):this._bungalowsService.addBungalows(i),getAfterSuccessResponse:i=>{i.data&&this._bungalowsService._updateStream(i.data,e?"edit":"add")}};this._dialog.openFormPopup(s,"500px")}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=p({type:t,selectors:[["ks-solutions-bungalows-listing"]],standalone:!0,features:[_],decls:1,vars:1,consts:[[3,"config","refresh$"]],template:function(s,i){s&1&&h(0,U,1,2,"ks-basic-grid",0),s&2&&f(i.gridConfig?0:-1)},dependencies:[y],changeDetection:0});let o=t;return o})()});$();export{ee as BungalowsComponent};
