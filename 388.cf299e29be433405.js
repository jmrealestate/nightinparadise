"use strict";(self.webpackChunknight_in_paradise=self.webpackChunknight_in_paradise||[]).push([[388],{3388:(k,m,n)=>{n.r(m),n.d(m,{CustomersListModule:()=>J});var i=n(4755),a=n(2280),p=n(2722),u=n(1241);const d=e=>e.customers,g=(0,u.P1)(d,e=>e.allCustomers),f=(0,u.P1)(d,e=>e.status);(0,u.P1)(d,e=>e.error);var C=n(5723),h=n(3772),t=n(9523);function v(e,r){1&e&&(t.TgZ(0,"div",3),t._UZ(1,"i",10),t.qZA())}function Z(e,r){1&e&&(t.TgZ(0,"div",3),t._UZ(1,"i",11),t.qZA())}function A(e,r){if(1&e&&(t.TgZ(0,"div",6)(1,"div",12),t._uU(2),t.qZA(),t.TgZ(3,"div",8),t._uU(4),t.qZA()()),2&e){const o=r.$implicit,s=t.oxw();t.xp6(2),t.hij(" ",o.contact," "),t.xp6(2),t.hij(" ",s.changeDate(o.bookedDate)," ")}}let b=(()=>{class e{constructor(){this.collapsed=!0}toggle(){this.collapsed=!this.collapsed}changeDate(o){const s=o.split("-");return`${s[2]}/${s[1]}/${s[0]}`}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["customers-customer"]],inputs:{record:"record"},decls:15,vars:9,consts:[[1,"btn","rounded-0","cs-text-bg-dark","w-100","mx-auto","border-bottom",3,"click"],[1,"row"],[1,"col-8","text-start","text-break"],[1,"col-2"],["class","col-2",4,"ngIf"],[1,"btn","py-0","rounded-0","text-light","bg-dark","w-100","mx-auto","border-bottom",2,"cursor","default"],[1,"row","border-bottom","border-1","border-secondary"],[1,"col-7","text-start"],[1,"col-5","text-end"],["class","row border-bottom border-1 border-secondary",4,"ngFor","ngForOf"],[1,"fa","fa-angle-down"],[1,"fa","fa-angle-up","text-warning"],[1,"col-7","text-start","text-break"]],template:function(o,s){1&o&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return s.toggle()}),t.TgZ(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t._uU(5),t.qZA(),t.YNc(6,v,2,0,"div",4),t.YNc(7,Z,2,0,"div",4),t.qZA()(),t.TgZ(8,"div",5)(9,"div",6)(10,"div",7),t._uU(11,"contact info"),t.qZA(),t.TgZ(12,"div",8),t._uU(13,"date"),t.qZA()(),t.YNc(14,A,5,2,"div",9),t.qZA()),2&o&&(t.ekj("collapsed",s.collapsed),t.xp6(3),t.Oqu(s.record.name),t.xp6(2),t.Oqu(s.record.count),t.xp6(1),t.Q6J("ngIf",s.collapsed),t.xp6(1),t.Q6J("ngIf",!s.collapsed),t.xp6(1),t.ekj("collapse",s.collapsed),t.xp6(6),t.Q6J("ngForOf",s.record.bookings))},dependencies:[i.sg,i.O5]}),e})();var l=n(5030),T=n(245);function x(e,r){1&e&&t._UZ(0,"customers-customer",11),2&e&&t.Q6J("record",r.$implicit)}const y=[{path:"",component:(()=>{class e extends h.f{constructor(o){super(),this._store=o,this.filter="",this.DATA=[],this.filteredCustomers=[],this.status$=this._store.select(f)}ngOnInit(){this._store.dispatch((0,C.oc)()),this._store.select(g).pipe((0,p.R)(this.unsubscribe$)).subscribe(o=>{this.DATA=[...o].sort((s,c)=>c.count-s.count),this.filteredCustomers=[...this.DATA]})}filterCustomers(){this.filteredCustomers=this.DATA.filter(o=>o.name.toLowerCase().includes(this.filter.toLowerCase()))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-customers-list"]],features:[t.qOj],decls:16,vars:6,consts:[[3,"loading","refresh"],[1,"mx-auto","w-700"],[1,"p-2","cs-text-bg-dark","border-bottom","border-light"],[1,"form-floating","w-300","mx-auto"],["autocomplete","off","type","text","name","username","placeholder","Filter",1,"form-control","text-light","bg-dark",3,"ngModel","keyup","ngModelChange"],[1,"text-light"],[1,"btn","rounded-0","cs-text-bg-dark","w-100","mx-auto","border-bottom",2,"cursor","default"],[1,"row"],[1,"col-7","text-start"],[1,"col-5"],[3,"record",4,"ngFor","ngForOf"],[3,"record"]],template:function(o,s){1&o&&(t._UZ(0,"shared-loading",0),t.ALo(1,"async"),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"input",4),t.NdJ("keyup",function(){return s.filterCustomers()})("ngModelChange",function(U){return s.filter=U}),t.qZA(),t.TgZ(6,"label",5),t._uU(7,"Filter"),t.qZA()()()(),t.TgZ(8,"div",1)(9,"button",6)(10,"div",7)(11,"div",8),t._uU(12,"customer"),t.qZA(),t.TgZ(13,"div",9),t._uU(14,"Reservations"),t.qZA()()(),t.YNc(15,x,1,1,"customers-customer",10),t.qZA()),2&o&&(t.Q6J("loading","Loading"===t.lcZ(1,4,s.status$))("refresh",0!==s.DATA.length),t.xp6(5),t.Q6J("ngModel",s.filter),t.xp6(10),t.Q6J("ngForOf",s.filteredCustomers))},dependencies:[i.sg,b,l.Fj,l.JJ,l.On,T.N,i.Ov]}),e})()}];let L=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.Bz.forChild(y),a.Bz]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[i.ez]}),e})();var F=n(591);let J=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[i.ez,L,M,l.u5,F.I]}),e})()}}]);