"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[203],{2203:(D,p,o)=>{o.r(p),o.d(p,{ReviewsModule:()=>K});var u=o(6814),h=o(9255),t=o(7700),g=o(9781),m=o(7858),d=o(5083),v=o(3403),f=o(9773),x=o(8180),_=o(9017),w=o(6223),r=o(5994),C=o(6775),e=o(5879),l=o(3408),c=o(2025);const R=function(){return{icon:"delete",ripple:!0}};function Z(n,b){if(1&n){const i=e.EpF();e.TgZ(0,"shared-icon",3),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.onDelete())}),e.qZA()}2&n&&e.Q6J("config",e.DdM(1,R))}const M=function(){return{icon:"remove_red_eye",ripple:!0}};let N=(()=>{class n{constructor(i){this._reviewService=i,this.isAdmin=(0,_.q)(r.l.admin)}agInit(i){this.cellValue=this.getValueToDisplay(i)}refresh(i){return this.cellValue=this.getValueToDisplay(i),!0}onInfo(){this._reviewService.changes$.next({action:"view-details",customer:this.rowValue})}onDelete(){this._reviewService.changes$.next({customer:this.rowValue,action:"delete"})}getValueToDisplay(i){return this.rowValue=i.data,i.valueFormatted?i.valueFormatted:i.value}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(l.Y))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["total-value-component"]],decls:3,vars:3,consts:[[1,"h-100","w-100","d-flex","align-items-center","justify-content-center"],[1,"cursor-pointer",3,"config","click"],["class","ms-3 cursor-pointer",3,"config","click",4,"ngIf"],[1,"ms-3","cursor-pointer",3,"config","click"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"shared-icon",1),e.NdJ("click",function(){return a.onInfo()}),e.qZA(),e.YNc(2,Z,1,2,"shared-icon",2),e.qZA()),2&s&&(e.xp6(1),e.Q6J("config",e.DdM(2,M)),e.xp6(1),e.Q6J("ngIf",a.isAdmin))},dependencies:[u.O5,c.o],styles:["button[_ngcontent-%COMP%]{border:none;background-color:inherit}"]})}return n})();var W=o(9866);function E(n,b){if(1&n&&(e.TgZ(0,"div",2)(1,"ul",3)(2,"li",4),e._uU(3),e.qZA(),e.TgZ(4,"li",4),e._uU(5),e.qZA(),e.TgZ(6,"li",4),e._uU(7),e.qZA(),e.TgZ(8,"li",4),e._uU(9),e.qZA(),e.TgZ(10,"li",4),e._uU(11),e.qZA(),e.TgZ(12,"li",4),e._uU(13),e.qZA(),e.TgZ(14,"li",4),e._uU(15),e.qZA(),e.TgZ(16,"li",4),e._uU(17),e.qZA(),e.TgZ(18,"li",4),e._uU(19),e.qZA()()()),2&n){const i=e.oxw();e.xp6(3),e.hij("Customer Name: ",i.data.name,""),e.xp6(2),e.hij("Experience: ",i.data.experience," / 5 stars"),e.xp6(2),e.hij("Cleanliness: ",i.data.cleanliness," / 5 stars"),e.xp6(2),e.hij("Comfort: ",i.data.comfort," / 5 stars"),e.xp6(2),e.hij("Amenities: ",i.data.amenities," / 5 stars"),e.xp6(2),e.hij(" Customer Service: ",i.data.customerService," / 5 stars "),e.xp6(2),e.hij("Recommend: ",i.data.recommend?"Yes":"No",""),e.xp6(2),e.hij(" Improvement: ",i.data.improvement?i.data.improvement:"N/A"," "),e.xp6(2),e.hij(" Comments: ",i.data.comments?i.data.comments:"N/A"," ")}}const P=function(){return{title:"Review"}};let O=(()=>{class n{constructor(i,s){this.data=i,this._dialogRef=s}handleDialogActions(i){(!i||"ok"===i||"cancel"===i)&&this.closeDialog()}changeDate(i){return(0,l.M)(i)}closeDialog(){this._dialogRef.close()}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(t.WI),e.Y36(t.so))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-review-popup"]],decls:2,vars:3,consts:[[3,"config","btnClicked"],["class","container py-2 cd-max",4,"ngIf"],[1,"container","py-2","cd-max"],[1,"row"],[1,"cs-r"]],template:function(s,a){1&s&&(e.TgZ(0,"shared-confirm-body",0),e.NdJ("btnClicked",function(y){return a.handleDialogActions(y)}),e.YNc(1,E,20,9,"div",1),e.qZA()),2&s&&(e.Q6J("config",e.DdM(2,P)),e.xp6(1),e.Q6J("ngIf",a.data))},dependencies:[u.O5,W.F],styles:[".cs-r[_ngcontent-%COMP%]{padding:7px;font-size:16px}"]})}return n})();var I=o(8532),B=o(1961),J=o(4246);const k=function(){return{icon:"search",color:"var(--primary-color)"}},S=function(n){return{label:"Search",prefixIcon:n}},j=[{path:"",component:(()=>{class n extends C.H{constructor(i,s,a){super(s),this._dialog=i,this._navService=s,this._reviewService=a,this.buttons=[],this.isAdmin=(0,_.q)(r.l.admin),this.innerWidth=window.innerWidth,this.searchControl=new w.NI(""),this.columnDefs=this.getCols(),this.defaultColDef={initialWidth:100,sortable:!0,resizable:!0,filter:!0,flex:1,minWidth:100}}ngOnInit(){this._reviewService.getAllReviews(),this.Navbar_Update({show:!0,back:!1,title:this.NAV_NAMES.REVIEWS.children.WHOLESALE.name,buttons:this.buttons}),this.NavButtons$.pipe((0,f.R)(this.__unsubscribe$)).subscribe(i=>{}),this.searchControl.valueChanges.pipe((0,f.R)(this.__unsubscribe$)).subscribe(i=>{this.onFilterTextBoxChanged(i)}),this._reviewService.changes$.pipe((0,f.R)(this.__unsubscribe$)).subscribe(i=>{"view-details"===i.action?this.openCustomerReservations(i.customer):"delete"===i.action&&i.customer&&this.onDelete(i.customer)})}ngOnDestroy(){super.ngOnDestroy(),this._reviewService.changes$.next({})}onGridReady(i){this.gridApi=i.api,this._reviewService.customers$.pipe((0,f.R)(this.__unsubscribe$)).subscribe(s=>this.rowData=s)}onFilterTextBoxChanged(i){this.gridApi.setQuickFilter(i)}openCustomerReservations(i){this._dialog.open(O,{width:"95vw",maxWidth:"600px",maxHeight:"95vh",disableClose:!0,restoreFocus:!1,data:i})}onDelete(i){this._dialog.open(I.P,{width:"95vw",maxWidth:"500px",disableClose:!0,restoreFocus:!1,autoFocus:!1,data:{title:"Confirm Delete",bodyMessage:"Are you sure you want to delete this review?",showYesNo:!0,showOk:!1}}).afterClosed().pipe((0,x.q)(1)).subscribe(s=>{s&&"yes"===s&&i?._id&&this._reviewService.deleteReview(i)})}getCols(){return[{headerName:"Customer Name",field:"name",minWidth:150},{headerName:"Experience",field:"experience",minWidth:150,maxWidth:150,width:150},{headerName:"Cleanliness",field:"cleanliness",minWidth:150,maxWidth:150,width:150},{headerName:"Comfort",field:"comfort",minWidth:150,maxWidth:150,width:150},{headerName:"Amenities",field:"amenities",minWidth:150,maxWidth:150,width:150},{headerName:"Customer Service",field:"customerService",minWidth:150,maxWidth:150,width:150},{headerName:"Date",field:"createdAt",valueFormatter:s=>function F(n){const i=n.split("T")[0].split("-");return`${i[2]}/${i[1]}/${i[0]}`}(s.data.createdAt),width:130,minWidth:130,maxWidth:130},{headerName:"",cellRenderer:N,width:this.isAdmin?100:60,minWidth:this.isAdmin?100:60,maxWidth:this.isAdmin?100:60,sortable:!1,filter:!1,resizable:!1,pinned:"right"}]}onWindowResize(i){this.innerWidth=window.innerWidth}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(t.uw),e.Y36(B.t),e.Y36(l.Y))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-reviews"]],hostBindings:function(s,a){1&s&&e.NdJ("resize",function(){return a.onWindowResize()},!1,e.Jf7)},features:[e.qOj],decls:3,vars:15,consts:[[2,"max-width","300px"],[3,"config","control"],[2,"width","100%","height","calc(100vh - 255px)","min-height","400px",3,"rowHeight","columnDefs","defaultColDef","rowData","pagination","paginationAutoPageSize","gridReady"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0),e._UZ(1,"shared-input",1),e.qZA(),e.TgZ(2,"ag-grid-angular",2),e.NdJ("gridReady",function(y){return a.onGridReady(y)}),e.qZA()),2&s&&(e.xp6(1),e.Q6J("config",e.VKq(13,S,e.DdM(12,k)))("control",a.searchControl),e.xp6(1),e.ekj("ag-theme-alpine","light"===a.$theme)("ag-theme-alpine-dark","dark"===a.$theme),e.Q6J("rowHeight",35)("columnDefs",a.columnDefs)("defaultColDef",a.defaultColDef)("rowData",a.rowData)("pagination",a.innerWidth>700)("paginationAutoPageSize",!0))},dependencies:[d.N8,J.a]})}return n})()}];let Y=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[v.Bz.forChild(j),v.Bz]})}return n})(),K=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[u.ez,d.sF,Y,h.B,t.Is,g.n,m.j]})}return n})()},8532:(D,p,o)=>{o.d(p,{P:()=>w});var u=o(7700),h=o(7430),t=o(5879),g=o(6814),m=o(2025),d=o(5995);function v(r,C){if(1&r&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.data.bodyMessage," ")}}function f(r,C){if(1&r){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"shared-button",10),t.NdJ("btnClicked",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.yesClicked())}),t.qZA()(),t.TgZ(3,"div",9)(4,"shared-button",10),t.NdJ("btnClicked",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.noClicked())}),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(2),t.Q6J("config",e.yesButtonConfig),t.xp6(2),t.Q6J("config",e.noButtonConfig)}}function x(r,C){if(1&r){const e=t.EpF();t.TgZ(0,"div",11)(1,"shared-button",10),t.NdJ("btnClicked",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.okClicked())}),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("config",e.okButtonConfig)}}const _=function(){return{icon:"close",color:"var(--text-color)"}};let w=(()=>{class r{constructor(e,l){this.dialogRef=e,this.data=l,this.appName=(0,h.Cd)("constants",!0)?.appName?(0,h.Cd)("constants",!0)?.appName:"P.O.S",this.okButtonConfig={label:"OK",type:"button",color:"primary",matAttribute:"mat-raised-button"},this.yesButtonConfig={label:"Yes",color:"primary",matAttribute:"mat-raised-button",takeFullWidth:!0},this.noButtonConfig={label:"No",color:"primary",matAttribute:"mat-raised-button",takeFullWidth:!0}}yesClicked(){this.dialogRef.close("yes")}noClicked(){this.dialogRef.close("no")}okClicked(){this.dialogRef.close("ok")}closeClicked(){this.dialogRef.close()}static#e=this.\u0275fac=function(l){return new(l||r)(t.Y36(u.so),t.Y36(u.WI))};static#t=this.\u0275cmp=t.Xpm({type:r,selectors:[["ng-component"]],decls:11,vars:6,consts:[[2,"border-radius","7px 7px 0 0"],[1,"cs-pop-title","d-flex","justify-content-between","py-2","px-4","text-light","align-items-center"],[2,"cursor","pointer",3,"config","click"],[2,"display","flex","border-top","1px solid gainsboro","margin","0px"],[1,"text-center","py-2","px-2",2,"min-height","70px"],[4,"ngIf"],["class","py-2 align-items-center justify-content-center d-flex",4,"ngIf"],["class","py-2 text-center",4,"ngIf"],[1,"py-2","align-items-center","justify-content-center","d-flex"],[1,"mx-1",2,"width","120px"],[3,"config","btnClicked"],[1,"py-2","text-center"]],template:function(l,c){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"shared-icon",2),t.NdJ("click",function(){return c.closeClicked()}),t.qZA()(),t._UZ(5,"div",3),t.TgZ(6,"div",4),t.YNc(7,v,2,1,"div",5),t.qZA(),t._UZ(8,"div",3),t.YNc(9,f,5,2,"div",6),t.YNc(10,x,2,1,"div",7),t.qZA()),2&l&&(t.xp6(3),t.Oqu(c.data.title?c.data.title:c.appName),t.xp6(1),t.Q6J("config",t.DdM(5,_)),t.xp6(3),t.Q6J("ngIf",c.data.bodyMessage),t.xp6(2),t.Q6J("ngIf",1==c.data.showYesNo),t.xp6(1),t.Q6J("ngIf",1==c.data.showOk))},dependencies:[g.O5,m.o,d.r],styles:[".cs-pop-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600}.cs-pop-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:var(--text-color)}"]})}return r})()},9017:(D,p,o)=>{o.d(p,{q:()=>t});var u=o(5994),h=o(7430);function t(g){let d=(0,h.Cd)("roles",!0)||[];return!("object"!=typeof d||!Array.isArray(d)||!d.includes(g)&&!d.includes(u.l.admin))}}}]);