"use strict";(self.webpackChunknight_in_paradise=self.webpackChunknight_in_paradise||[]).push([[513],{1513:(K,m,i)=>{i.r(m),i.d(m,{AllReservationsModule:()=>G});var _=i(4755),c=i(2280),g=i(136),t=i(9523);let h=(()=>{class e{constructor(){this.month=(new Date).getMonth(),this.year=(new Date).getFullYear(),this.firstDay=new Date(this.year,this.month).getDay(),this.daysInMonth=32-new Date(this.year,this.month,32).getDate(),this.currentDate="",this.monthName=g._.MONTH_NAMES}ngOnInit(){this.setCurrentDate()}sendCalendarData(){return{firstDay:new Date(this.year,this.month).getDay(),daysInMonth:32-new Date(this.year,this.month,32).getDate()}}prev(){this.month--,this.month<0&&(this.month=11,this.year--),this.setCurrentDate()}next(){this.month++,this.month>11&&(this.month=0,this.year++),this.setCurrentDate()}setCurrentDate(){this.currentDate=`${this.monthName[this.month]} ${this.year}`}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var d=i(7732),p=i(978),f=i(5076),v=i(1241),x=i(6316);function C(e,s){1&e&&t._UZ(0,"div")}function y(e,s){}function A(e,s){1&e&&t._UZ(0,"div")}function T(e,s){1&e&&t._UZ(0,"div")}function R(e,s){1&e&&t._UZ(0,"div")}function D(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(4).$implicit,l=t.oxw().$implicit,r=t.oxw();return t.KtG(r.sendReservation(r.formatDate(7*l+a-r.firstDay+1,r.year,r.month)))}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw(4).$implicit,o=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.hij(" ",7*o+n-a.firstDay+1," ")}}function N(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(4).$implicit,l=t.oxw().$implicit,r=t.oxw();return t.KtG(r.sendData(r.formatDate(7*l+a-r.firstDay+1,r.year,r.month)))}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw(4).$implicit,o=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.hij(" ",7*o+n-a.firstDay+1," ")}}function Z(e,s){if(1&e&&(t.YNc(0,R,1,0,"div",2),t.YNc(1,D,2,1,"ng-template",null,9,t.W1O),t.YNc(3,N,2,1,"ng-template",null,10,t.W1O)),2&e){const n=t.MAs(2),o=t.MAs(4),a=t.oxw(3).$implicit,l=t.oxw().$implicit,r=t.oxw();t.Q6J("ngIf",r.findReservation(r.formatDate(7*l+a-r.firstDay+1,r.year,r.month)))("ngIfThen",n)("ngIfElse",o)}}function I(e,s){1&e&&t._UZ(0,"div")}function M(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(4).$implicit,l=t.oxw().$implicit,r=t.oxw();return t.KtG(r.sendReservation(r.formatDate(7*l+a-r.firstDay+1,r.year,r.month)))}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw(4).$implicit,o=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.hij(" ",7*o+n-a.firstDay+1," ")}}function b(e,s){if(1&e&&(t.TgZ(0,"button",15),t._uU(1),t.qZA()),2&e){const n=t.oxw(4).$implicit,o=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.hij(" ",7*o+n-a.firstDay+1," ")}}function w(e,s){if(1&e&&(t.YNc(0,I,1,0,"div",2),t.YNc(1,M,2,1,"ng-template",null,13,t.W1O),t.YNc(3,b,2,1,"ng-template",null,14,t.W1O)),2&e){const n=t.MAs(2),o=t.MAs(4),a=t.oxw(3).$implicit,l=t.oxw().$implicit,r=t.oxw();t.Q6J("ngIf",r.findReservation(r.formatDate(7*l+a-r.firstDay+1,r.year,r.month)))("ngIfThen",n)("ngIfElse",o)}}function O(e,s){if(1&e&&(t.YNc(0,T,1,0,"div",2),t.YNc(1,Z,5,3,"ng-template",null,7,t.W1O),t.YNc(3,w,5,3,"ng-template",null,8,t.W1O)),2&e){const n=t.MAs(2),o=t.MAs(4),a=t.oxw(4);t.Q6J("ngIf",a.roles.includes(5150)||a.roles.includes(2001))("ngIfThen",n)("ngIfElse",o)}}function S(e,s){if(1&e&&(t.YNc(0,A,1,0,"div",5),t.YNc(1,O,5,3,"ng-template",null,6,t.W1O)),2&e){const n=t.MAs(2),o=t.oxw().$implicit,a=t.oxw().$implicit,l=t.oxw();t.Q6J("ngIf",7*a+o-l.firstDay+1<=l.daysInMonth)("ngIfThen",n)}}function $(e,s){if(1&e&&(t.TgZ(0,"td"),t.YNc(1,C,1,0,"div",2),t.YNc(2,y,0,0,"ng-template",null,3,t.W1O),t.YNc(4,S,3,2,"ng-template",null,4,t.W1O),t.qZA()),2&e){const n=s.$implicit,o=t.MAs(3),a=t.MAs(5),l=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.Q6J("ngIf",0===l&&n<r.firstDay)("ngIfThen",o)("ngIfElse",a)}}function E(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,$,6,3,"td",1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.jArr)}}let U=(()=>{class e{constructor(){this.iArr=[0,1,2,3,4,5],this.jArr=[0,1,2,3,4,5,6],this.customClass="text-center bg-dark text-light py-2 w-auto border border-1 border-secondary ",this.month=(new Date).getMonth(),this.year=(new Date).getFullYear(),this.bNumb=0,this.firstDay=new Date(this.year,this.month).getDay(),this.roles=[],this.RESERVATIONS=[],this.daysInMonth=32-new Date(this.year,this.month,32).getDate(),this.sendAddReservationData=new t.vpe,this.SendOpenReservation=new t.vpe}findReservation(n){return!!this.RESERVATIONS.filter(a=>a.bookedDate==n&&a.number==this.bNumb)[0]}formatDate(n,o,a){return(0,x.z)(n,o,a)}sendData(n){this.sendAddReservationData.emit({date:n,bNumb:this.bNumb})}sendReservation(n){let o=this.RESERVATIONS.find(a=>a.bookedDate==n&&a.number==this.bNumb);this.SendOpenReservation.emit(o)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["reservation-calendar"]],inputs:{month:"month",year:"year",bNumb:"bNumb",firstDay:"firstDay",roles:"roles",RESERVATIONS:"RESERVATIONS",daysInMonth:"daysInMonth"},outputs:{sendAddReservationData:"sendAddReservationData",SendOpenReservation:"SendOpenReservation"},decls:19,vars:15,consts:[[1,"w-100","p-1","cs-text-bg-dark"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfThen","ngIfElse"],["thenBlock",""],["elseBlock",""],[4,"ngIf","ngIfThen"],["thenBlock2",""],["thenBlock3",""],["elseBlock3",""],["thenBlock10",""],["elseBlock10",""],[1,"btn","btn-success","rounded-0","w-100",3,"click"],[1,"btn","btn-outline-secondary","rounded-0","w-100",3,"click"],["thenBlock11",""],["elseBlock11",""],["disabled","",1,"btn","btn-outline-secondary","rounded-0","w-100"]],template:function(n,o){1&n&&(t.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Sun"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Mon"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Tue"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Wed"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Thu"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Fri"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Sat"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,E,2,1,"tr",1),t.qZA()()),2&n&&(t.xp6(3),t.Tol(o.customClass),t.xp6(2),t.Tol(o.customClass),t.xp6(2),t.Tol(o.customClass),t.xp6(2),t.Tol(o.customClass),t.xp6(2),t.Tol(o.customClass),t.xp6(2),t.Tol(o.customClass),t.xp6(2),t.Tol(o.customClass),t.xp6(3),t.Q6J("ngForOf",o.iArr))},dependencies:[_.sg,_.O5]}),e})();var j=i(245);function J(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div")(1,"div",5),t._uU(2," Bungalow 1 "),t.qZA(),t.TgZ(3,"div",6)(4,"reservation-calendar",7),t.NdJ("sendAddReservationData",function(a){t.CHM(n);const l=t.oxw(2);return t.KtG(l.addReservation(a))})("SendOpenReservation",function(a){t.CHM(n);const l=t.oxw(2);return t.KtG(l.openReservation(a))}),t.qZA()(),t.TgZ(5,"div",8),t._uU(6," Bungalow 2 "),t.qZA(),t.TgZ(7,"div",6)(8,"reservation-calendar",9),t.NdJ("sendAddReservationData",function(a){t.CHM(n);const l=t.oxw(2);return t.KtG(l.addReservation(a))})("SendOpenReservation",function(a){t.CHM(n);const l=t.oxw(2);return t.KtG(l.openReservation(a))}),t.qZA()()()}if(2&e){const n=s.ngIf,o=t.oxw().ngIf,a=t.oxw();t.xp6(4),t.Q6J("month",a.month)("roles",n.roles)("year",a.year)("bNumb",1)("daysInMonth",a.sendCalendarData().daysInMonth)("firstDay",a.sendCalendarData().firstDay)("RESERVATIONS",o),t.xp6(4),t.Q6J("roles",n.roles)("month",a.month)("year",a.year)("bNumb",2)("daysInMonth",a.sendCalendarData().daysInMonth)("firstDay",a.sendCalendarData().firstDay)("RESERVATIONS",o)}}function Y(e,s){if(1&e){const n=t.EpF();t.ynx(0),t._UZ(1,"shared-loading",1),t.ALo(2,"async"),t.TgZ(3,"section",2)(4,"div",3)(5,"button",4),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.prev())}),t._uU(6,"<<"),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.next())}),t._uU(10,">>"),t.qZA()(),t.YNc(11,J,9,14,"div",0),t.ALo(12,"async"),t.qZA(),t.BQk()}if(2&e){const n=s.ngIf,o=t.oxw();t.xp6(1),t.Q6J("loading","Loading"===t.lcZ(2,4,o.reservationsLoading$))("refresh",0!==n.length),t.xp6(7),t.Oqu(o.currentDate),t.xp6(3),t.Q6J("ngIf",t.lcZ(12,6,o.user$))}}let B=(()=>{class e extends h{constructor(n,o){super(),this._store=n,this._router=o,this.user$=this._store.select(f.dy),this.reservations$=this._store.select(p.Qb),this.reservationsLoading$=this._store.select(p.Lz)}ngOnInit(){super.ngOnInit(),this._store.dispatch((0,d.uf)())}addReservation(n){sessionStorage.setItem("date",n.date),sessionStorage.setItem("bNumb",JSON.stringify(n.bNumb)),this._store.dispatch((0,d.OP)()),this._router.navigateByUrl("/reservations/calendar/add")}openReservation(n){this._store.dispatch((0,d.se)({reservation:n})),this._router.navigateByUrl("/reservations/calendar/reservation")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.yh),t.Y36(c.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["reservation-all-reservations"]],features:[t.qOj],decls:3,vars:3,consts:[[4,"ngIf"],[3,"loading","refresh"],[1,"mx-auto","w-600"],[1,"d-flex","justify-content-around","align-items-center","p-2","cs-text-bg-dark","border-bottom","border-secondary"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","justify-content-center","align-items-center","p-2","cs-text-bg-dark"],[1,"pb-2","cs-text-bg-dark"],[3,"month","roles","year","bNumb","daysInMonth","firstDay","RESERVATIONS","sendAddReservationData","SendOpenReservation"],[1,"d-flex","justify-content-center","align-items-center","p-2","cs-text-bg-dark","border-top","border-warning"],[3,"roles","month","year","bNumb","daysInMonth","firstDay","RESERVATIONS","sendAddReservationData","SendOpenReservation"]],template:function(n,o){1&n&&(t._UZ(0,"router-outlet"),t.YNc(1,Y,13,8,"ng-container",0),t.ALo(2,"async")),2&n&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.reservations$)))},dependencies:[_.O5,c.lC,U,j.N,_.Ov]}),e})();var F=i(5428),u=i(5073);const Q=[{path:"",component:B,children:[{path:"add",loadChildren:()=>Promise.all([i.e(30),i.e(160),i.e(592),i.e(938)]).then(i.bind(i,7938)).then(e=>e.AddReservationModule),canActivate:[u.Q],data:{role:2001}},{path:"reservation",loadChildren:()=>Promise.all([i.e(30),i.e(160),i.e(592),i.e(953)]).then(i.bind(i,8953)).then(e=>e.ReservationModule),canActivate:[F.S,u.Q],data:{role:1984}}]}];let k=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(Q),c.Bz]}),e})(),H=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.ez]}),e})();var W=i(591);let G=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.ez,k,H,W.I]}),e})()}}]);