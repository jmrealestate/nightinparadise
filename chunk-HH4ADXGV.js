import{a as B}from"./chunk-G5AIESXN.js";import{a as A}from"./chunk-ODUYQDVC.js";import"./chunk-JHOHYJWD.js";import{a as d}from"./chunk-TL6R7WHS.js";import{a as s}from"./chunk-US4DBW3U.js";import"./chunk-IXDNPNBC.js";import"./chunk-IA4DM2LR.js";import{a as v}from"./chunk-JU5LHE6N.js";import{a as C}from"./chunk-TRRKCROW.js";import{Y as b,fa as y,xa as S}from"./chunk-XVDAFDV3.js";import{Cb as g,Da as u,Ib as f,Pb as x,Yb as w,a as r,ia as a,m as c,ma as p,pc as _,qb as h,xb as m}from"./chunk-PV357URW.js";function D(n,t){if(n&1&&x(0,"ks-basic-grid",0),n&2){let l=w();g("config",l.gridConfig)("refresh$",l.refresh$)}}var $=(()=>{let t=class t{constructor(){this._dialog=a(y),this._destroyRef=a(u),this._navService=a(v),this._bungalowsService=a(A),this.refresh$=new c,this._canAdd=d(s.ADD_BUNGALOW),this._canEdit=d(s.EDIT_BUNGALOW)}ngOnInit(){this._navService.updateNav({show:!0,back:!1,title:C.LAYOUT.children.BUNGALOWS.name,buttons:[{label:{text:"Add Bungalow"},prefixIcon:{icon:"icon_plus_circle"},hide:!this._canAdd,onClick:()=>{this._openBungalowPopup()}}]}),this._bungalowsService.getAllBungalows(),this._initializeGrid()}ngAfterViewInit(){this._bungalowsService.bungalow$.pipe(b(this._destroyRef)).subscribe(e=>{this.refresh$.next({data:e})})}_initializeGrid(){this.gridConfig={data:h([]),defaultPagination:100,maxTableHeight:B.maxTableHeightWithSearch,noDataMessage:{text:"No Bungalows Found"},features:{showSearch:!0},columns:[{field:"name",title:"Bungalow Name",type:"string",extraStyles:{"min-width":"170px","max-width":"300px",width:"170px"}},{field:"description",title:"Description",type:"string",extraStyles:{"min-width":"100px"}},{field:"active",title:"Active",type:"chip",extraStyles:{"min-width":"100px","max-width":"100px",width:"100px"},truthy:{false:"No",true:"Yes"},setChipClass:e=>e.active?"rounded rounded-5 px-3 py-1 text-bg-success cs-w-120":"rounded rounded-5 px-3 py-1 text-bg-danger cs-w-120"},{field:"createdAt",title:"Created At",type:"date",dateFormat:"dd/MM/yyyy - HH:mm:ss a",extraStyles:{"min-width":"170px","max-width":"170px",width:"170px"}}],actionsColumn:{enabled:this._canEdit,maxButtons:window.innerWidth<700?1:void 0,width:window.innerWidth<700?void 0:"70px",maxWidth:window.innerWidth<700?void 0:"70px",minWidth:window.innerWidth<700?void 0:"70px",buttons:[{prefixIcon:{icon:"icon_edit"},label:{text:"Edit"},onClickFn:e=>this._openBungalowPopup(e),matType:"mat-icon-button"}]}}}_openBungalowPopup(e){let o={title:{text:e?"Edit Bungalow":"Add Bungalow"},form:{value:e,fields:[{name:"name",label:{text:"Bungalow Name"},type:"text",required:!0,maxLength:30},{name:"description",label:{text:"Description"},type:"text",maxLength:100},{name:"active",type:"checkbox",label:{text:"Active"}}]},beforeCloseObservable:i=>e?this._bungalowsService.updateBungalows(r(r({},e),i)):this._bungalowsService.addBungalows(i),getAfterSuccessResponse:i=>{i.data&&this._bungalowsService._update(i.data,e?"edit":"add")}};this._dialog.openFormPopup(o,"500px")}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=p({type:t,selectors:[["ks-solutions-bungalows-listing"]],standalone:!0,features:[_],decls:1,vars:1,consts:[[3,"config","refresh$"]],template:function(o,i){o&1&&m(0,D,1,2,"ks-basic-grid",0),o&2&&f(i.gridConfig?0:-1)},dependencies:[S],changeDetection:0});let n=t;return n})();export{$ as BungalowsComponent};
