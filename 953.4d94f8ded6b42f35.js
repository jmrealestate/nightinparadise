"use strict";(self.webpackChunknight_in_paradise=self.webpackChunknight_in_paradise||[]).push([[953],{8953:(H,c,o)=>{o.r(c),o.d(c,{ReservationModule:()=>X});var l=o(4755),s=o(5030),m=o(2722),v=o(5698),f=o(3772),u=o(5076),p=o(7732),d=o(978),h=o(6073),x=o(9234),e=o(9523),g=o(1241),I=o(6831),b=o(4810),C=o(3877),R=o(942),N=o(8152),Z=o(1977),J=o(5512),T=o(9997);function E(t,i){if(1&t&&(e.TgZ(0,"div",10),e._UZ(1,"shared-suggestions-text-input",11),e.qZA()),2&t){const n=i.ngIf;e.xp6(1),e.Q6J("label","Name")("options",n)}}function D(t,i){if(1&t&&e._UZ(0,"shared-text-input",3),2&t){const n=e.oxw();e.Q6J("control",n.form.controls.notes)("label","Notes")}}function Q(t,i){if(1&t&&(e.TgZ(0,"div",12),e._UZ(1,"input",13),e.TgZ(2,"label",14),e._uU(3," Done "),e.qZA()()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("formControl",n.form.controls.done)}}function A(t,i){if(1&t&&(e.TgZ(0,"div",15)(1,"label",16),e._uU(2),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.hij(" ",n.form.controls.done.value?"Done":"Not Done"," ")}}function U(t,i){if(1&t&&(e.TgZ(0,"div",12),e._UZ(1,"input",17),e.TgZ(2,"label",18),e._uU(3," Deposit "),e.qZA()()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("formControl",n.form.controls.deposit)}}function y(t,i){if(1&t&&(e.TgZ(0,"div",15)(1,"label",16),e._uU(2),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.hij(" ",n.form.controls.deposit.value?"Deposit made":"No Deposit"," ")}}function Y(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"shared-button",19),e.NdJ("deleteReq",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.DeleteReservation())}),e.ALo(1,"async"),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("disabled","Loading"===e.lcZ(1,2,n.addStatus$))("showDelete",!0)}}function L(t,i){if(1&t&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&t){const n=i.ngIf;e.xp6(1),e.hij(" ",n&&n," ")}}let $=(()=>{class t extends f.f{constructor(n,r){super(),this._store=n,this._confirm=r,this.$=this._store.select(d.X3).pipe((0,m.R)(this.unsubscribe$)).subscribe(a=>{this.reservation=structuredClone(a),this.popover={createdAt:a.createdAt,createdBy:a.createdBy,updatedAt:a.updatedAt,updatedBy:a.updatedBy}}),this.$$=this._store.select(u.dy).pipe((0,m.R)(this.unsubscribe$)).subscribe(a=>{this.isEditor=!(!a.roles.includes(2001)&&!a.roles.includes(5150))}),this.addError$=this._store.select(d.h4),this.addStatus$=this._store.select(d.lY),this.names$=this._store.select(d.eJ),this.form=new s.cw({bookedDate:new s.NI({value:this.reservation.bookedDate,disabled:!0}),person:new s.cw({name:new s.NI({value:this.reservation.person.name,disabled:!this.isEditor},[s.kI.required,s.kI.minLength(5),s.kI.maxLength(25)]),contact:new s.NI({value:this.reservation.person.contact,disabled:!this.isEditor},[s.kI.required,s.kI.minLength(5),s.kI.maxLength(25)])}),notes:new s.NI(this.reservation.notes),price:new s.NI({value:this.reservation.price,disabled:!this.isEditor},[s.kI.required]),done:new s.NI(this.reservation.done),deposit:new s.NI(this.reservation.deposit)})}editReservation(){(0,h.G)(this.form)&&this._store.dispatch((0,p.UD)({reservation:{bookedDate:this.reservation.bookedDate,number:this.reservation.number,notes:this.form.value.notes,person:{contact:this.form.value.person?.contact,name:this.form.value.person?.name},price:this.form.value.price,_id:this.reservation._id,done:this.form.value.done,deposit:this.form.value.deposit}}))}DeleteReservation(){this._confirm.openConfirm(x.l.RESERVATIONS.CONFIRM_DELETE).pipe((0,v.q)(2)).subscribe(n=>{!0===n&&this._store.dispatch((0,p.aL)({reservation:this.reservation}))})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g.yh),e.Y36(I.z))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reservation"]],features:[e.qOj],decls:16,vars:20,consts:[["autocomplete","off",1,"cs-text-bg-dark","text-light","pt-3","px-3","rounded-4","d-flex","flex-column",3,"formGroup","ngSubmit"],[3,"label","content","on"],["formGroupName","person",4,"ngIf"],[3,"control","label"],[3,"control"],[3,"control","label",4,"ngIf"],["class","form-check",4,"ngIf"],["class","form-check mb-3",4,"ngIf"],[3,"disabled","showDelete","deleteReq",4,"ngIf"],["class","text-danger text-center",4,"ngIf"],["formGroupName","person"],["formControlName","name",3,"label","options"],[1,"form-check"],["type","checkbox","id","flexCheckIndeterminate",1,"form-check-input",3,"formControl"],["for","flexCheckIndeterminate",1,"form-check-label"],[1,"form-check","mb-3"],[1,"form-check-label"],["type","checkbox","id","flexCheckIndeterminat2e",1,"form-check-input",3,"formControl"],["for","flexCheckIndeterminat2e",1,"form-check-label"],[3,"disabled","showDelete","deleteReq"],[1,"text-danger","text-center"]],template:function(n,r){1&n&&(e.TgZ(0,"shared-modal")(1,"form",0),e.NdJ("ngSubmit",function(){return r.editReservation()}),e._UZ(2,"shared-popover",1),e.YNc(3,E,2,2,"div",2),e.ALo(4,"async"),e._UZ(5,"shared-text-input",3)(6,"shared-date-input",4)(7,"shared-price-input",4),e.YNc(8,D,1,2,"shared-text-input",5),e.YNc(9,Q,4,1,"div",6),e.YNc(10,A,3,1,"div",7),e.YNc(11,U,4,1,"div",6),e.YNc(12,y,3,1,"div",7),e.YNc(13,Y,2,4,"shared-button",8),e.YNc(14,L,2,1,"div",9),e.ALo(15,"async"),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(1),e.Q6J("label","Reservation")("content",r.popover)("on",r.isEditor),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,16,r.names$)),e.xp6(2),e.Q6J("control",r.form.controls.person.controls.contact)("label","Contact Info"),e.xp6(1),e.Q6J("control",r.form.controls.bookedDate),e.xp6(1),e.Q6J("control",r.form.controls.price),e.xp6(1),e.Q6J("ngIf",r.isEditor),e.xp6(1),e.Q6J("ngIf",r.isEditor),e.xp6(1),e.Q6J("ngIf",!r.isEditor),e.xp6(1),e.Q6J("ngIf",r.isEditor),e.xp6(1),e.Q6J("ngIf",!r.isEditor),e.xp6(1),e.Q6J("ngIf",r.isEditor),e.xp6(1),e.Q6J("ngIf",e.lcZ(15,18,r.addError$)))},dependencies:[l.O5,b.t,C.S,R.L,N.Y,s._Y,s.Wl,s.JJ,s.JL,s.oH,s.sg,s.u,s.x0,Z.z,J.U,T.w,l.Ov]}),t})();var S=o(5784),B=o(8454),G=o(4267),M=o(7257),j=o(2280),k=o(1528),z=o(5305),O=o(5203);const F=[{path:"",component:$}];let X=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,S.N,k.X,B.b,G.I,s.UX,M.z,z.U,O.o,j.Bz.forChild(F)]}),t})()}}]);