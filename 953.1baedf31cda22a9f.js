"use strict";(self.webpackChunknight_in_paradise=self.webpackChunknight_in_paradise||[]).push([[953],{8953:(X,c,e)=>{e.r(c),e.d(c,{ReservationModule:()=>F});var d=e(4755),s=e(5030),m=e(2722),v=e(5698),u=e(3772),f=e(5076),p=e(7732),l=e(978),h=e(6073),g=e(9234),t=e(9523),x=e(1241),I=e(6831),R=e(4810),b=e(3877),C=e(942),N=e(8152),J=e(1977),Z=e(5512),E=e(9997);function T(o,i){if(1&o&&(t.TgZ(0,"div",10),t._UZ(1,"shared-suggestions-text-input",11),t.qZA()),2&o){const n=i.ngIf;t.xp6(1),t.Q6J("label","Name")("options",n)}}function A(o,i){if(1&o&&t._UZ(0,"shared-text-input",3),2&o){const n=t.oxw();t.Q6J("control",n.form.controls.notes)("label","Notes")}}function D(o,i){if(1&o&&(t.TgZ(0,"div",12),t._UZ(1,"input",13),t.TgZ(2,"label",14),t._uU(3," Done "),t.qZA()()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("formControl",n.form.controls.done)}}function Q(o,i){if(1&o&&(t.TgZ(0,"div",15)(1,"label",16),t._uU(2),t.qZA()()),2&o){const n=t.oxw();t.xp6(2),t.hij(" ",n.form.controls.done.value?"Done":"Not Done"," ")}}function y(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"shared-button",17),t.NdJ("deleteReq",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.DeleteReservation())}),t.ALo(1,"async"),t.qZA()}if(2&o){const n=t.oxw();t.Q6J("disabled","Loading"===t.lcZ(1,2,n.addStatus$))("showDelete",!0)}}function U(o,i){if(1&o&&(t.TgZ(0,"div",18),t._uU(1),t.qZA()),2&o){const n=i.ngIf;t.xp6(1),t.hij(" ",n&&n," ")}}let L=(()=>{class o extends u.f{constructor(n,r){super(),this._store=n,this._confirm=r,this.$=this._store.select(l.X3).pipe((0,m.R)(this.unsubscribe$)).subscribe(a=>{this.reservation=structuredClone(a),this.popover={createdAt:a.createdAt,createdBy:a.createdBy,updatedAt:a.updatedAt,updatedBy:a.updatedBy}}),this.$$=this._store.select(f.dy).pipe((0,m.R)(this.unsubscribe$)).subscribe(a=>{this.isEditor=!(!a.roles.includes(2001)&&!a.roles.includes(5150))}),this.addError$=this._store.select(l.h4),this.addStatus$=this._store.select(l.lY),this.names$=this._store.select(l.eJ),this.form=new s.cw({bookedDate:new s.NI({value:this.reservation.bookedDate,disabled:!0}),person:new s.cw({name:new s.NI({value:this.reservation.person.name,disabled:!this.isEditor},[s.kI.required,s.kI.minLength(5),s.kI.maxLength(25)]),contact:new s.NI({value:this.reservation.person.contact,disabled:!this.isEditor},[s.kI.required,s.kI.minLength(5),s.kI.maxLength(25)])}),notes:new s.NI(this.reservation.notes),price:new s.NI({value:this.reservation.price,disabled:!this.isEditor},[s.kI.required]),done:new s.NI(this.reservation.done)})}editReservation(){(0,h.G)(this.form)&&this._store.dispatch((0,p.UD)({reservation:{bookedDate:this.reservation.bookedDate,number:this.reservation.number,notes:this.form.value.notes,person:{contact:this.form.value.person?.contact,name:this.form.value.person?.name},price:this.form.value.price,_id:this.reservation._id,done:this.form.value.done}}))}DeleteReservation(){this._confirm.openConfirm(g.l.RESERVATIONS.CONFIRM_DELETE).pipe((0,v.q)(2)).subscribe(n=>{!0===n&&this._store.dispatch((0,p.aL)({reservation:this.reservation}))})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(x.yh),t.Y36(I.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-reservation"]],features:[t.qOj],decls:14,vars:18,consts:[["autocomplete","off",1,"cs-text-bg-dark","text-light","pt-3","px-3","rounded-4","d-flex","flex-column",3,"formGroup","ngSubmit"],[3,"label","content","on"],["formGroupName","person",4,"ngIf"],[3,"control","label"],[3,"control"],[3,"control","label",4,"ngIf"],["class","form-check",4,"ngIf"],["class","form-check mb-3",4,"ngIf"],[3,"disabled","showDelete","deleteReq",4,"ngIf"],["class","text-danger text-center",4,"ngIf"],["formGroupName","person"],["formControlName","name",3,"label","options"],[1,"form-check"],["type","checkbox","id","flexCheckIndeterminate",1,"form-check-input",3,"formControl"],["for","flexCheckIndeterminate",1,"form-check-label"],[1,"form-check","mb-3"],[1,"form-check-label"],[3,"disabled","showDelete","deleteReq"],[1,"text-danger","text-center"]],template:function(n,r){1&n&&(t.TgZ(0,"shared-modal")(1,"form",0),t.NdJ("ngSubmit",function(){return r.editReservation()}),t._UZ(2,"shared-popover",1),t.YNc(3,T,2,2,"div",2),t.ALo(4,"async"),t._UZ(5,"shared-text-input",3)(6,"shared-date-input",4)(7,"shared-price-input",4),t.YNc(8,A,1,2,"shared-text-input",5),t.YNc(9,D,4,1,"div",6),t.YNc(10,Q,3,1,"div",7),t.YNc(11,y,2,4,"shared-button",8),t.YNc(12,U,2,1,"div",9),t.ALo(13,"async"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("formGroup",r.form),t.xp6(1),t.Q6J("label","Reservation")("content",r.popover)("on",r.isEditor),t.xp6(1),t.Q6J("ngIf",t.lcZ(4,14,r.names$)),t.xp6(2),t.Q6J("control",r.form.controls.person.controls.contact)("label","Contact Info"),t.xp6(1),t.Q6J("control",r.form.controls.bookedDate),t.xp6(1),t.Q6J("control",r.form.controls.price),t.xp6(1),t.Q6J("ngIf",r.isEditor),t.xp6(1),t.Q6J("ngIf",r.isEditor),t.xp6(1),t.Q6J("ngIf",!r.isEditor),t.xp6(1),t.Q6J("ngIf",r.isEditor),t.xp6(1),t.Q6J("ngIf",t.lcZ(13,16,r.addError$)))},dependencies:[d.O5,R.t,b.S,C.L,N.Y,s._Y,s.Wl,s.JJ,s.JL,s.oH,s.sg,s.u,s.x0,J.z,Z.U,E.w,d.Ov]}),o})();var Y=e(5784),$=e(8454),S=e(4267),B=e(7257),G=e(2280),M=e(1528),z=e(5305),O=e(5203);const j=[{path:"",component:L}];let F=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,Y.N,M.X,$.b,S.I,s.UX,B.z,z.U,O.o,G.Bz.forChild(j)]}),o})()}}]);