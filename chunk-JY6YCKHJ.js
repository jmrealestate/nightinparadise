import{a as c,b as k}from"./chunk-QHM7Z56U.js";import{a as i,b as $}from"./chunk-UOQFKZ5Q.js";import{Fa as l,Wa as b,na as E,oa as _}from"./chunk-OZNJVQIE.js";import{M as p,Vc as S,ba as x,e as v,fa as d,la as f,o as h,tb as u,y as a,z as m}from"./chunk-LUSYJMV7.js";var X,y=v(()=>{"use strict";S();_();b();x();$();k();S();X=(()=>{let n=class n{constructor(){this._networkService=f(l),this._expenses$=new h([]),this.date=u(new Date),this.expensesLov$=this._expenses$.pipe(a(e=>{let r=new Map;for(let t of e){let s=t.name.trim();r.has(s)||r.set(s,t.name.trim())}return Array.from(r.values()).map(t=>({name:t,value:t})).sort((t,s)=>t.name.localeCompare(s.name))})),this.filteredExpenses$=m([this._expenses$,E(this.date)]).pipe(a(([e,r])=>{let t=(r.getMonth()+1).toString().padStart(2,"0"),s=r.getFullYear();return e.filter(w=>w.date.startsWith(`${s}-${t}`))}))}changeDate(e){this.date.update(r=>{if(typeof e=="string"){let t=new Date(r);return t.setDate(15),e==="next"?t.setMonth(r.getMonth()+1):t.setMonth(r.getMonth()-1),t}else return new Date(e.year,e.month-1,15)})}getExpenses(){this._networkService.get(i.EXPENSES).pipe(p(1)).subscribe({next:e=>{e.data&&this._expenses$.next(e.data)}})}addExpense(e){return this._networkService.post(i.EXPENSES,e)}updateExpense(e){return this._networkService.patch(i.EXPENSES,e,e._id)}deleteExpense(e){this._networkService.delete(i.EXPENSES,void 0,e._id).pipe(p(1)).subscribe(()=>{c.UpdateArrayBehaviorSubject(this._expenses$,e,"delete","_id")})}_updateStream(e,r){c.UpdateArrayBehaviorSubject(this._expenses$,e,r,"_id")}};n.\u0275fac=function(r){return new(r||n)},n.\u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})()});export{X as a,y as b};
