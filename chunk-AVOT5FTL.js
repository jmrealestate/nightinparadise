import{a as D}from"./chunk-I6LUEWCY.js";import"./chunk-JHOHYJWD.js";import{a}from"./chunk-JE5EXO4F.js";import{b as C}from"./chunk-JWZPFOXC.js";import{a as B}from"./chunk-Q7PONYZL.js";import"./chunk-6CYPE36V.js";import"./chunk-BPNGRFUY.js";import{a as y}from"./chunk-ONICS2XY.js";import{a as A}from"./chunk-5ML3MIDN.js";import{Ba as b,Y as v,ja as S}from"./chunk-32GEDFAZ.js";import{Cb as m,Da as u,Ib as f,Pb as x,Yb as w,a as r,b as l,ia as n,m as d,ma as p,pc as _,qb as g,xb as h}from"./chunk-OWBIYIKH.js";function k(o,t){if(o&1&&x(0,"ks-basic-grid",0),o&2){let c=w();m("config",c.gridConfig)("refresh$",c.refresh$)}}var H=(()=>{let t=class t{constructor(){this._destroyRef=n(u),this._dialog=n(S),this._navService=n(y),this._configService=n(B),this._sessionService=n(C),this._bungalowsService=n(D),this.refresh$=new d,this._canAdd=this._sessionService.checkAccess(a.ADD_BUNGALOW),this._canEdit=this._sessionService.checkAccess(a.EDIT_BUNGALOW)}ngOnInit(){this._navService.updateNav({show:!0,back:!1,title:A.LAYOUT.children.BUNGALOWS.name,buttons:[{label:{text:"Add Bungalow"},prefixIcon:{icon:"icon_plus_circle"},hide:!this._canAdd,onClick:()=>this._openBungalowPopup()}]}),this._initializeGrid(),this._bungalowsService.getAllBungalows()}ngAfterViewInit(){this._bungalowsService.bungalow$.pipe(v(this._destroyRef)).subscribe(e=>{this.refresh$.next({data:e})})}_initializeGrid(){this.gridConfig={data:g([]),defaultPagination:100,maxTableHeight:this._configService.appConfig.maxTableHeightWithSearch,noDataMessage:{text:"No Bungalows Found"},features:{showSearch:!0},columns:[{field:"name",title:"Bungalow Name",type:"string",extraStyles:{"min-width":"170px","max-width":"300px",width:"170px"}},{field:"description",title:"Description",type:"string",extraStyles:{"min-width":"100px"}},{field:"active",title:"Active",type:"chip",extraStyles:{"min-width":"100px","max-width":"100px",width:"100px"},truthy:{false:"No",true:"Yes"},setChipClass:e=>e.active?"rounded rounded-5 px-3 py-1 text-bg-success":"rounded rounded-5 px-3 py-1 text-bg-danger"},{field:"createdAt",title:"Created At",type:"date",dateFormat:"dd/MM/yyyy - HH:mm:ss a",extraStyles:{"min-width":"170px","max-width":"170px",width:"170px"}}],actionsColumn:l(r({},this._configService.getActionColumn(1)),{enabled:this._canEdit,buttons:[{prefixIcon:{icon:"icon_edit"},label:{text:"Edit"},onClickFn:e=>this._openBungalowPopup(e),matType:"mat-icon-button"}]})}}_openBungalowPopup(e){let s={hideClearButton:!0,title:{text:e?"Edit Bungalow":"Add Bungalow"},form:{value:e,fields:[{name:"name",label:{text:"Bungalow Name"},type:"text",required:!0,maxLength:30},{name:"description",label:{text:"Description"},type:"text",maxLength:100},{name:"active",type:"checkbox",label:{text:"Active"}}]},beforeCloseObservable:i=>e?this._bungalowsService.updateBungalows(r(r({},e),i)):this._bungalowsService.addBungalows(i),getAfterSuccessResponse:i=>{i.data&&this._bungalowsService._updateStream(i.data,e?"edit":"add")}};this._dialog.openFormPopup(s,"500px")}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=p({type:t,selectors:[["ks-solutions-bungalows-listing"]],standalone:!0,features:[_],decls:1,vars:1,consts:[[3,"config","refresh$"]],template:function(s,i){s&1&&h(0,k,1,2,"ks-basic-grid",0),s&2&&f(i.gridConfig?0:-1)},dependencies:[b],changeDetection:0});let o=t;return o})();export{H as BungalowsComponent};
