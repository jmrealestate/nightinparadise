"use strict";(self.webpackChunknight_in_paradise=self.webpackChunknight_in_paradise||[]).push([[513],{1513:(G,m,i)=>{i.r(m),i.d(m,{AllReservationsModule:()=>W});var _=i(4755),c=i(2280),h=i(136),t=i(9523);let g=(()=>{class e{constructor(){this.month=(new Date).getMonth(),this.year=(new Date).getFullYear(),this.firstDay=new Date(this.year,this.month).getDay(),this.daysInMonth=32-new Date(this.year,this.month,32).getDate(),this.currentDate="",this.monthName=h._.MONTH_NAMES}ngOnInit(){this.setCurrentDate()}sendCalendarData(){return{firstDay:new Date(this.year,this.month).getDay(),daysInMonth:32-new Date(this.year,this.month,32).getDate()}}prev(){this.month--,this.month<0&&(this.month=11,this.year--),this.setCurrentDate()}next(){this.month++,this.month>11&&(this.month=0,this.year++),this.setCurrentDate()}setCurrentDate(){this.currentDate=`${this.monthName[this.month]} ${this.year}`}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var d=i(7732),p=i(978),f=i(5076),v=i(1241),x=i(6316);function y(e,r){1&e&&t._UZ(0,"div")}function C(e,r){}function D(e,r){1&e&&t._UZ(0,"div")}function A(e,r){1&e&&t._UZ(0,"div")}function R(e,r){1&e&&t._UZ(0,"div")}function T(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(4).$implicit,l=t.oxw().$implicit,s=t.oxw();return t.KtG(s.sendReservation(s.formatDate(7*l+o-s.firstDay+1,s.year,s.month)))}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw(4).$implicit,a=t.oxw().$implicit,o=t.oxw();t.Q6J("ngClass",o.checkForDone(o.formatDate(7*a+n-o.firstDay+1,o.year,o.month))?"btn rounded-0 w-100 btn-primary":o.checkForDeposit(o.formatDate(7*a+n-o.firstDay+1,o.year,o.month))?"btn rounded-0 w-100 btn-danger":"btn rounded-0 w-100 btn-success"),t.xp6(1),t.hij(" ",7*a+n-o.firstDay+1," ")}}function b(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(4).$implicit,l=t.oxw().$implicit,s=t.oxw();return t.KtG(s.sendData(s.formatDate(7*l+o-s.firstDay+1,s.year,s.month)))}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw(4).$implicit,a=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.hij(" ",7*a+n-o.firstDay+1," ")}}function N(e,r){if(1&e&&(t.YNc(0,R,1,0,"div",2),t.YNc(1,T,2,2,"ng-template",null,9,t.W1O),t.YNc(3,b,2,1,"ng-template",null,10,t.W1O)),2&e){const n=t.MAs(2),a=t.MAs(4),o=t.oxw(3).$implicit,l=t.oxw().$implicit,s=t.oxw();t.Q6J("ngIf",s.findReservation(s.formatDate(7*l+o-s.firstDay+1,s.year,s.month)))("ngIfThen",n)("ngIfElse",a)}}function I(e,r){1&e&&t._UZ(0,"div")}function Z(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(4).$implicit,l=t.oxw().$implicit,s=t.oxw();return t.KtG(s.sendReservation(s.formatDate(7*l+o-s.firstDay+1,s.year,s.month)))}),t._uU(1),t.qZA()}if(2&e){const n=t.oxw(4).$implicit,a=t.oxw().$implicit,o=t.oxw();t.Q6J("ngClass",o.checkForDone(o.formatDate(7*a+n-o.firstDay+1,o.year,o.month))?"btn rounded-0 w-100 btn-primary":o.checkForDeposit(o.formatDate(7*a+n-o.firstDay+1,o.year,o.month))?"btn rounded-0 w-100 btn-danger":"btn rounded-0 w-100 btn-success"),t.xp6(1),t.hij(" ",7*a+n-o.firstDay+1," ")}}function w(e,r){if(1&e&&(t.TgZ(0,"button",15),t._uU(1),t.qZA()),2&e){const n=t.oxw(4).$implicit,a=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.hij(" ",7*a+n-o.firstDay+1," ")}}function M(e,r){if(1&e&&(t.YNc(0,I,1,0,"div",2),t.YNc(1,Z,2,2,"ng-template",null,13,t.W1O),t.YNc(3,w,2,1,"ng-template",null,14,t.W1O)),2&e){const n=t.MAs(2),a=t.MAs(4),o=t.oxw(3).$implicit,l=t.oxw().$implicit,s=t.oxw();t.Q6J("ngIf",s.findReservation(s.formatDate(7*l+o-s.firstDay+1,s.year,s.month)))("ngIfThen",n)("ngIfElse",a)}}function O(e,r){if(1&e&&(t.YNc(0,A,1,0,"div",2),t.YNc(1,N,5,3,"ng-template",null,7,t.W1O),t.YNc(3,M,5,3,"ng-template",null,8,t.W1O)),2&e){const n=t.MAs(2),a=t.MAs(4),o=t.oxw(4);t.Q6J("ngIf",o.roles.includes(5150)||o.roles.includes(2001))("ngIfThen",n)("ngIfElse",a)}}function S(e,r){if(1&e&&(t.YNc(0,D,1,0,"div",5),t.YNc(1,O,5,3,"ng-template",null,6,t.W1O)),2&e){const n=t.MAs(2),a=t.oxw().$implicit,o=t.oxw().$implicit,l=t.oxw();t.Q6J("ngIf",7*o+a-l.firstDay+1<=l.daysInMonth)("ngIfThen",n)}}function E(e,r){if(1&e&&(t.TgZ(0,"td"),t.YNc(1,y,1,0,"div",2),t.YNc(2,C,0,0,"ng-template",null,3,t.W1O),t.YNc(4,S,3,2,"ng-template",null,4,t.W1O),t.qZA()),2&e){const n=r.$implicit,a=t.MAs(3),o=t.MAs(5),l=t.oxw().$implicit,s=t.oxw();t.xp6(1),t.Q6J("ngIf",0===l&&n<s.firstDay)("ngIfThen",a)("ngIfElse",o)}}function $(e,r){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,E,6,3,"td",1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.jArr)}}let F=(()=>{class e{constructor(){this.iArr=[0,1,2,3,4,5],this.jArr=[0,1,2,3,4,5,6],this.customClass="text-center bg-dark text-light py-2 w-auto border border-1 border-secondary ",this.month=(new Date).getMonth(),this.year=(new Date).getFullYear(),this.bNumb=0,this.firstDay=new Date(this.year,this.month).getDay(),this.roles=[],this.RESERVATIONS=[],this.daysInMonth=32-new Date(this.year,this.month,32).getDate(),this.sendAddReservationData=new t.vpe,this.SendOpenReservation=new t.vpe}findReservation(n){return!!this.RESERVATIONS.filter(o=>o.bookedDate==n&&o.number==this.bNumb)[0]}checkForDone(n){return!!this.RESERVATIONS.find(o=>o.bookedDate==n&&o.number==this.bNumb&&o.done)}checkForDeposit(n){return!!this.RESERVATIONS.find(o=>o.bookedDate==n&&o.number==this.bNumb&&o.deposit)}formatDate(n,a,o){return(0,x.z)(n,a,o)}sendData(n){this.sendAddReservationData.emit({date:n,bNumb:this.bNumb})}sendReservation(n){let a=this.RESERVATIONS.find(o=>o.bookedDate==n&&o.number==this.bNumb);this.SendOpenReservation.emit(a)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["reservation-calendar"]],inputs:{month:"month",year:"year",bNumb:"bNumb",firstDay:"firstDay",roles:"roles",RESERVATIONS:"RESERVATIONS",daysInMonth:"daysInMonth"},outputs:{sendAddReservationData:"sendAddReservationData",SendOpenReservation:"SendOpenReservation"},decls:19,vars:15,consts:[[1,"w-100","p-1","cs-text-bg-dark"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfThen","ngIfElse"],["thenBlock",""],["elseBlock",""],[4,"ngIf","ngIfThen"],["thenBlock2",""],["thenBlock3",""],["elseBlock3",""],["thenBlock10",""],["elseBlock10",""],[3,"ngClass","click"],[1,"btn","btn-outline-secondary","rounded-0","w-100",3,"click"],["thenBlock11",""],["elseBlock11",""],["disabled","",1,"btn","btn-outline-secondary","rounded-0","w-100"]],template:function(n,a){1&n&&(t.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Sun"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Mon"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Tue"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Wed"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Thu"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Fri"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Sat"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,$,2,1,"tr",1),t.qZA()()),2&n&&(t.xp6(3),t.Tol(a.customClass),t.xp6(2),t.Tol(a.customClass),t.xp6(2),t.Tol(a.customClass),t.xp6(2),t.Tol(a.customClass),t.xp6(2),t.Tol(a.customClass),t.xp6(2),t.Tol(a.customClass),t.xp6(2),t.Tol(a.customClass),t.xp6(3),t.Q6J("ngForOf",a.iArr))},dependencies:[_.mk,_.sg,_.O5]}),e})();var J=i(245);function U(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div")(1,"div",5),t._uU(2," Bungalow 1 "),t.qZA(),t.TgZ(3,"div",6)(4,"reservation-calendar",7),t.NdJ("sendAddReservationData",function(o){t.CHM(n);const l=t.oxw(2);return t.KtG(l.addReservation(o))})("SendOpenReservation",function(o){t.CHM(n);const l=t.oxw(2);return t.KtG(l.openReservation(o))}),t.qZA()(),t.TgZ(5,"div",8),t._uU(6," Bungalow 2 "),t.qZA(),t.TgZ(7,"div",6)(8,"reservation-calendar",9),t.NdJ("sendAddReservationData",function(o){t.CHM(n);const l=t.oxw(2);return t.KtG(l.addReservation(o))})("SendOpenReservation",function(o){t.CHM(n);const l=t.oxw(2);return t.KtG(l.openReservation(o))}),t.qZA()()()}if(2&e){const n=r.ngIf,a=t.oxw().ngIf,o=t.oxw();t.xp6(4),t.Q6J("month",o.month)("roles",n.roles)("year",o.year)("bNumb",1)("daysInMonth",o.sendCalendarData().daysInMonth)("firstDay",o.sendCalendarData().firstDay)("RESERVATIONS",a),t.xp6(4),t.Q6J("roles",n.roles)("month",o.month)("year",o.year)("bNumb",2)("daysInMonth",o.sendCalendarData().daysInMonth)("firstDay",o.sendCalendarData().firstDay)("RESERVATIONS",a)}}function j(e,r){if(1&e){const n=t.EpF();t.ynx(0),t._UZ(1,"shared-loading",1),t.ALo(2,"async"),t.TgZ(3,"section",2)(4,"div",3)(5,"button",4),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.prev())}),t._uU(6,"<<"),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.next())}),t._uU(10,">>"),t.qZA()(),t.YNc(11,U,9,14,"div",0),t.ALo(12,"async"),t.qZA(),t.BQk()}if(2&e){const n=r.ngIf,a=t.oxw();t.xp6(1),t.Q6J("loading","Loading"===t.lcZ(2,4,a.reservationsLoading$))("refresh",0!==n.length),t.xp6(7),t.Oqu(a.currentDate),t.xp6(3),t.Q6J("ngIf",t.lcZ(12,6,a.user$))}}let Y=(()=>{class e extends g{constructor(n,a){super(),this._store=n,this._router=a,this.user$=this._store.select(f.dy),this.reservations$=this._store.select(p.Qb),this.reservationsLoading$=this._store.select(p.Lz)}ngOnInit(){super.ngOnInit(),this._store.dispatch((0,d.uf)())}addReservation(n){sessionStorage.setItem("date",n.date),sessionStorage.setItem("bNumb",JSON.stringify(n.bNumb)),this._store.dispatch((0,d.OP)()),this._router.navigateByUrl("/reservations/calendar/add")}openReservation(n){this._store.dispatch((0,d.se)({reservation:n})),this._router.navigateByUrl("/reservations/calendar/reservation")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.yh),t.Y36(c.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["reservation-all-reservations"]],features:[t.qOj],decls:3,vars:3,consts:[[4,"ngIf"],[3,"loading","refresh"],[1,"mx-auto","w-600"],[1,"d-flex","justify-content-around","align-items-center","p-2","cs-text-bg-dark","border-bottom","border-secondary"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","justify-content-center","align-items-center","p-2","cs-text-bg-dark"],[1,"pb-2","cs-text-bg-dark"],[3,"month","roles","year","bNumb","daysInMonth","firstDay","RESERVATIONS","sendAddReservationData","SendOpenReservation"],[1,"d-flex","justify-content-center","align-items-center","p-2","cs-text-bg-dark","border-top","border-warning"],[3,"roles","month","year","bNumb","daysInMonth","firstDay","RESERVATIONS","sendAddReservationData","SendOpenReservation"]],template:function(n,a){1&n&&(t._UZ(0,"router-outlet"),t.YNc(1,j,13,8,"ng-container",0),t.ALo(2,"async")),2&n&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,a.reservations$)))},dependencies:[_.O5,c.lC,F,J.N,_.Ov]}),e})();var k=i(5428),u=i(5073);const B=[{path:"",component:Y,children:[{path:"add",loadChildren:()=>Promise.all([i.e(30),i.e(160),i.e(592),i.e(938)]).then(i.bind(i,7938)).then(e=>e.AddReservationModule),canActivate:[u.Q],data:{role:2001}},{path:"reservation",loadChildren:()=>Promise.all([i.e(30),i.e(160),i.e(592),i.e(953)]).then(i.bind(i,8953)).then(e=>e.ReservationModule),canActivate:[k.S,u.Q],data:{role:1984}}]}];let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(B),c.Bz]}),e})(),V=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.ez]}),e})();var H=i(591);let W=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.ez,Q,V,H.I]}),e})()}}]);