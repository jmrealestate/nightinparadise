"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[600],{8223:(P,A,o)=>{o.d(A,{M:()=>v,s:()=>n});var t=o(5619),g=o(8180),e=o(3985),E=o(5879),M=o(8068);let n=(()=>{class C{constructor(f){this.networkService=f,this._customers$=new t.X([]),this.customers$=this._customers$.asObservable(),this.changes$=new t.X({})}getAllCustomersNames(){this.networkService.get(e.b.CUSTOMERS).pipe((0,g.q)(1)).subscribe(f=>{f&&Array.isArray(f)&&this._customers$.next(f.sort((O,_)=>_.count-O.count))})}static#t=this.\u0275fac=function(O){return new(O||C)(E.LFG(M.S))};static#e=this.\u0275prov=E.Yz7({token:C,factory:C.\u0275fac})}return C})();function v(C){const l=C.split("-");return`${l[2]}/${l[1]}/${l[0]}`}},9153:(P,A,o)=>{o.d(A,{G:()=>r});var t=o(6223),g=o(7700),e=o(7022),E=o(5693),M=o(8180),n=o(5879),v=o(5937),C=o(6814),l=o(2025),f=o(4246),O=o(9798),_=o(2596),x=o(9866);const p=function(){return{icon:"info",ripple:!0}};function T(u,y){if(1&u){const i=n.EpF();n.TgZ(0,"div",6)(1,"shared-icon",7,8),n.NdJ("click",function(){n.CHM(i);const a=n.MAs(2);return n.KtG(a.toggle())}),n.qZA()()}if(2&u){const i=n.oxw();n.xp6(1),n.Q6J("matTooltip",i.getTooltipContent())("matTooltipPosition","left")("config",n.DdM(3,p))}}const m=function(u){return{title:u,showSave:!0,showCancel:!0}},d=function(u,y){return{label:u,options:y}},D=function(){return{label:"Date",type:"date"}},s=function(){return{label:"Amount in $",type:"number"}},h=function(){return{label:"Notes"}};let r=(()=>{class u{constructor(i,c,a){this.data=i,this._dialogRef=c,this._financeService=a,this.form=new t.cw({title:new t.NI("",[t.kI.required,t.kI.minLength(5),t.kI.maxLength(25)]),date:new t.NI("",[t.kI.required]),price:new t.NI("",[t.kI.required]),notes:new t.NI("")}),this.revs=[],this.exps=[]}ngOnInit(){this.data&&this.data.data&&(this.editForm(this.data.data),this.loadedData=structuredClone(this.data.data)),"Revenue"===this.data.title?this._financeService.revenues$.pipe((0,M.q)(1)).subscribe(i=>{if(i&&Array.isArray(i)){const c=[];i.forEach(a=>{c.includes(a.title)||c.push(a.title)}),this.revs=c.map(a=>({name:a,value:a}))}}):"Expense"===this.data.title&&this._financeService.expenses$.pipe((0,M.q)(1)).subscribe(i=>{if(i&&Array.isArray(i)){const c=[];i.forEach(a=>{c.includes(a.title)||c.push(a.title)}),this.exps=c.map(a=>({name:a,value:a}))}})}handleDialogActions(i){i&&"ok"!==i&&"cancel"!==i?"save"===i&&this.submit():this._dialogRef.close()}getTooltipContent(){if(this.data&&this.data){let i="";return i=this.data.data.createdAt!==this.data.data.updatedAt?`Created by ${this.data.data.createdBy} at ${(0,e.TG)(this.data.data.createdAt)}\nUpdated by ${this.data.data.updatedBy} at ${(0,e.TG)(this.data.data.updatedAt)}`:`Created by ${this.data.data.createdBy} at ${(0,e.TG)(this.data.data.createdAt)}`,i}return""}editForm(i){this.form.patchValue({title:i.title,date:i.date,price:i.price?.toString(),notes:i.notes})}submit(){if((0,E.s)(this.form)){const i=this.format(this.form.value);this._dialogRef.close(i)}}format(i){const c=this.loadedData?{...this.loadedData}:{date:"",title:""};return c.title=i.title,c.date=this.formatDate(i.date),c.price=Number(i.price),c.notes=i.notes??"",c}formatDate(i){const c=new Date(i);if(isNaN(c.getTime()))return"Invalid Date";const a=c.getDate().toString().padStart(2,"0"),I=(c.getMonth()+1).toString().padStart(2,"0");return`${c.getFullYear()}-${I}-${a}`}static#t=this.\u0275fac=function(c){return new(c||u)(n.Y36(g.WI),n.Y36(g.so),n.Y36(v.w))};static#e=this.\u0275cmp=n.Xpm({type:u,selectors:[["app-exp-rev-popup"]],decls:12,vars:19,consts:[[3,"config","btnClicked"],[1,"cd-max"],[1,"my-2"],["class","h-100 w-100 d-flex align-items-center justify-content-end pe-3",4,"ngIf"],[3,"config","control"],[3,"disableTypingDate","config","control"],[1,"h-100","w-100","d-flex","align-items-center","justify-content-end","pe-3"],[1,"cursor-pointer",3,"matTooltip","matTooltipPosition","config","click"],["tooltip","matTooltip"]],template:function(c,a){1&c&&(n.TgZ(0,"shared-confirm-body",0),n.NdJ("btnClicked",function(Z){return a.handleDialogActions(Z)}),n.TgZ(1,"div",1)(2,"form",2),n.YNc(3,T,3,4,"div",3),n.TgZ(4,"div",2),n._UZ(5,"shared-autocomplete",4),n.qZA(),n.TgZ(6,"div",2),n._UZ(7,"shared-input",5),n.qZA(),n.TgZ(8,"div",2),n._UZ(9,"shared-input",4),n.qZA(),n.TgZ(10,"div",2),n._UZ(11,"shared-input",4),n.qZA()()()()),2&c&&(n.Q6J("config",n.VKq(11,m,a.data.data?"Edit "+a.data.title:"Add "+a.data.title)),n.xp6(3),n.Q6J("ngIf",a.data.data),n.xp6(2),n.Q6J("config",n.WLB(13,d,a.data.title,"Revenue"===a.data.title?a.revs:a.exps))("control",a.form.controls.title),n.xp6(2),n.Q6J("disableTypingDate",!0)("config",n.DdM(16,D))("control",a.form.controls.date),n.xp6(2),n.Q6J("config",n.DdM(17,s))("control",a.form.controls.price),n.xp6(2),n.Q6J("config",n.DdM(18,h))("control",a.form.controls.notes))},dependencies:[C.O5,t._Y,t.JL,t.F,l.o,f.a,O.Y,_.gM,x.F],styles:[".cd-max[_ngcontent-%COMP%]{max-height:calc(95vh - 170px);overflow-y:scroll}"]})}return u})()},8018:(P,A,o)=>{o.d(A,{m:()=>n});var t=o(5879),g=o(5937),e=o(2025);const E=function(){return{icon:"edit",ripple:!0}},M=function(){return{icon:"delete",ripple:!0}};let n=(()=>{class v{constructor(l){this._financeService=l,this.innerWidth=window.innerWidth}agInit(l){this.cellValue=this.getValueToDisplay(l)}refresh(l){return this.cellValue=this.getValueToDisplay(l),!0}onView(){this._financeService.expChanges$.next({exp:this.rowValue,state:"edit"})}onDelete(){this._financeService.expChanges$.next({exp:this.rowValue,state:"delete"})}getValueToDisplay(l){return this.rowValue=l.data,l.valueFormatted?l.valueFormatted:l.value}static#t=this.\u0275fac=function(f){return new(f||v)(t.Y36(g.w))};static#e=this.\u0275cmp=t.Xpm({type:v,selectors:[["expense-value-component"]],decls:3,vars:4,consts:[[1,"h-100","w-100","d-flex","align-items-center","justify-content-center"],[1,"cursor-pointer",3,"config","click"],[1,"cursor-pointer","ms-2",3,"config","click"]],template:function(f,O){1&f&&(t.TgZ(0,"div",0)(1,"shared-icon",1),t.NdJ("click",function(){return O.onView()}),t.qZA(),t.TgZ(2,"shared-icon",2),t.NdJ("click",function(){return O.onDelete()}),t.qZA()()),2&f&&(t.xp6(1),t.Q6J("config",t.DdM(2,E)),t.xp6(1),t.Q6J("config",t.DdM(3,M)))},dependencies:[e.o]})}return v})()},9798:(P,A,o)=>{o.d(A,{Y:()=>m});var t=o(5879),g=o(6223),e=o(6814),E=o(9157),M=o(2032),n=o(3680),v=o(4630),C=o(2022),l=o(2025),f=o(1656);const O=["input"];function _(d,D){if(1&d){const s=t.EpF();t.TgZ(0,"shared-icon",9),t.NdJ("click",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.onIconClick("prefix"))}),t.qZA()}if(2&d){const s=t.oxw();t.Q6J("config",s.config.prefixIcon)}}function x(d,D){if(1&d&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&d){const s=D.$implicit;t.Udp("border-bottom","1px solid var(--divider-color)"),t.Q6J("value",s.value),t.xp6(1),t.hij(" ",s.name," ")}}function p(d,D){if(1&d){const s=t.EpF();t.TgZ(0,"shared-icon",11),t.NdJ("click",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.onIconClick("suffix"))}),t.qZA()}if(2&d){const s=t.oxw();t.Q6J("config",s.config.suffixIcon)}}function T(d,D){if(1&d&&(t.TgZ(0,"mat-error"),t._UZ(1,"shared-field-validation",12),t.qZA()),2&d){const s=t.oxw();t.xp6(1),t.Q6J("control",s.control)}}let m=(()=>{class d{constructor(){this.control=new g.NI,this.enableStrict=!1,this.filteredOptions=[],this.iconClickEvent=new t.vpe}ngOnInit(){void 0!==this.config.emptyOption&&this.config.options.unshift({name:this.config.emptyOption,value:void 0}),this.filteredOptions=this.config.options.slice()}onIconClick(s){this.iconClickEvent.emit({type:s})}blur(){const s=this.control.value,h=this.input?.nativeElement;h&&(this.control.setValue(s),h.value=s)}filter(){const s=this.input?.nativeElement?.value?.toLowerCase().trim()??"";this.filteredOptions=this.config.options.filter(h=>h.name.toLowerCase().includes(s))}static#t=this.\u0275fac=function(h){return new(h||d)};static#e=this.\u0275cmp=t.Xpm({type:d,selectors:[["shared-autocomplete"]],viewQuery:function(h,r){if(1&h&&t.Gf(O,5),2&h){let u;t.iGM(u=t.CRH())&&(r.input=u.first)}},inputs:{config:"config",control:"control",enableStrict:"enableStrict"},outputs:{iconClickEvent:"iconClickEvent"},decls:12,vars:14,consts:[[1,"shared-select",3,"appearance","color"],["matPrefix","","class","d-flex align-items-center mx-2 cursor-pointer",3,"config","click",4,"ngIf"],["type","text","placeholder","Start Typing ...","matInput","","TextTrimmer","",3,"formControl","matAutocomplete","blur","input","focus"],["input",""],[3,"requireSelection"],["auto","matAutocomplete"],[3,"border-bottom","value",4,"ngFor","ngForOf"],["matSuffix","","class","d-flex align-items-center mx-2 cursor-pointer",3,"config","click",4,"ngIf"],[4,"ngFor","ngForOf"],["matPrefix","",1,"d-flex","align-items-center","mx-2","cursor-pointer",3,"config","click"],[3,"value"],["matSuffix","",1,"d-flex","align-items-center","mx-2","cursor-pointer",3,"config","click"],[3,"control"]],template:function(h,r){if(1&h&&(t.TgZ(0,"mat-form-field",0),t.YNc(1,_,1,1,"shared-icon",1),t.TgZ(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("blur",function(){return r.blur()})("input",function(){return r.filter()})("focus",function(){return r.filter()}),t.qZA(),t.TgZ(6,"mat-autocomplete",4,5),t.YNc(8,x,2,4,"mat-option",6),t.qZA(),t.YNc(9,p,1,1,"shared-icon",7),t.YNc(10,T,2,1,"mat-error",8),t.ALo(11,"keyvalue"),t.qZA()),2&h){const u=t.MAs(7);t.ekj("hide-extra",r.config.hideExtra),t.Q6J("appearance",r.config.appearance?r.config.appearance:"outline")("color",r.config.color?r.config.color:"primary"),t.xp6(1),t.Q6J("ngIf",r.config.prefixIcon),t.xp6(2),t.Oqu(r.config.label),t.xp6(1),t.Q6J("formControl",r.control)("matAutocomplete",u),t.xp6(2),t.Q6J("requireSelection",r.enableStrict),t.xp6(2),t.Q6J("ngForOf",r.filteredOptions),t.xp6(1),t.Q6J("ngIf",r.config.suffixIcon),t.xp6(1),t.Q6J("ngForOf",t.lcZ(11,12,r.control.errors))}},dependencies:[e.sg,e.O5,g.Fj,g.JJ,g.oH,E.KE,E.hX,E.TO,E.qo,E.R9,M.Nt,n.ey,v.XC,v.ZL,C.$,l.o,f.n,e.Nd],styles:[".shared-select[_ngcontent-%COMP%]{width:100%}.hide-extra[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}"]})}return d})()},8532:(P,A,o)=>{o.d(A,{P:()=>O});var t=o(7700),g=o(7430),e=o(5879),E=o(6814),M=o(2025),n=o(5995);function v(_,x){if(1&_&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&_){const p=e.oxw();e.xp6(1),e.hij(" ",p.data.bodyMessage," ")}}function C(_,x){if(1&_){const p=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"shared-button",10),e.NdJ("btnClicked",function(){e.CHM(p);const m=e.oxw();return e.KtG(m.yesClicked())}),e.qZA()(),e.TgZ(3,"div",9)(4,"shared-button",10),e.NdJ("btnClicked",function(){e.CHM(p);const m=e.oxw();return e.KtG(m.noClicked())}),e.qZA()()()}if(2&_){const p=e.oxw();e.xp6(2),e.Q6J("config",p.yesButtonConfig),e.xp6(2),e.Q6J("config",p.noButtonConfig)}}function l(_,x){if(1&_){const p=e.EpF();e.TgZ(0,"div",11)(1,"shared-button",10),e.NdJ("btnClicked",function(){e.CHM(p);const m=e.oxw();return e.KtG(m.okClicked())}),e.qZA()()}if(2&_){const p=e.oxw();e.xp6(1),e.Q6J("config",p.okButtonConfig)}}const f=function(){return{icon:"close",color:"var(--text-color)"}};let O=(()=>{class _{constructor(p,T){this.dialogRef=p,this.data=T,this.appName=(0,g.Cd)("constants",!0)?.appName?(0,g.Cd)("constants",!0)?.appName:"P.O.S",this.okButtonConfig={label:"OK",type:"button",color:"primary",matAttribute:"mat-raised-button"},this.yesButtonConfig={label:"Yes",color:"primary",matAttribute:"mat-raised-button",takeFullWidth:!0},this.noButtonConfig={label:"No",color:"primary",matAttribute:"mat-raised-button",takeFullWidth:!0}}yesClicked(){this.dialogRef.close("yes")}noClicked(){this.dialogRef.close("no")}okClicked(){this.dialogRef.close("ok")}closeClicked(){this.dialogRef.close()}static#t=this.\u0275fac=function(T){return new(T||_)(e.Y36(t.so),e.Y36(t.WI))};static#e=this.\u0275cmp=e.Xpm({type:_,selectors:[["ng-component"]],decls:11,vars:6,consts:[[2,"border-radius","7px 7px 0 0"],[1,"cs-pop-title","d-flex","justify-content-between","py-2","px-4","text-light","align-items-center"],[2,"cursor","pointer",3,"config","click"],[2,"display","flex","border-top","1px solid gainsboro","margin","0px"],[1,"text-center","py-2","px-2",2,"min-height","70px"],[4,"ngIf"],["class","py-2 align-items-center justify-content-center d-flex",4,"ngIf"],["class","py-2 text-center",4,"ngIf"],[1,"py-2","align-items-center","justify-content-center","d-flex"],[1,"mx-1",2,"width","120px"],[3,"config","btnClicked"],[1,"py-2","text-center"]],template:function(T,m){1&T&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"shared-icon",2),e.NdJ("click",function(){return m.closeClicked()}),e.qZA()(),e._UZ(5,"div",3),e.TgZ(6,"div",4),e.YNc(7,v,2,1,"div",5),e.qZA(),e._UZ(8,"div",3),e.YNc(9,C,5,2,"div",6),e.YNc(10,l,2,1,"div",7),e.qZA()),2&T&&(e.xp6(3),e.Oqu(m.data.title?m.data.title:m.appName),e.xp6(1),e.Q6J("config",e.DdM(5,f)),e.xp6(3),e.Q6J("ngIf",m.data.bodyMessage),e.xp6(2),e.Q6J("ngIf",1==m.data.showYesNo),e.xp6(1),e.Q6J("ngIf",1==m.data.showOk))},dependencies:[E.O5,M.o,n.r],styles:[".cs-pop-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600}.cs-pop-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:var(--text-color)}"]})}return _})()}}]);