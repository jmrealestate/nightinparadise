import{a as L}from"./chunk-Q7PONYZL.js";import{a as K}from"./chunk-6CYPE36V.js";import"./chunk-BPNGRFUY.js";import{a as W}from"./chunk-ONICS2XY.js";import{a as z}from"./chunk-5ML3MIDN.js";import{Ba as H,K as j,L as B,Y as O,ja as N,ma as G,ya as U}from"./chunk-32GEDFAZ.js";import{Ac as P,Cb as f,Da as D,Ib as u,Jb as T,L as S,Lb as A,Mb as I,Nb as c,Ob as a,Pb as M,Yb as h,a as x,b as _,bd as E,ca as w,fb as s,hc as m,ia as n,ic as R,jc as C,m as b,ma as d,n as y,oc as $,pc as g,qb as k,xb as l,yc as F}from"./chunk-OWBIYIKH.js";function q(t,e){if(t&1&&(c(0,"div",3)(1,"div",4)(2,"div",5)(3,"h5",6),m(4),a(),c(5,"p",7)(6,"strong"),m(7,"Date:"),a(),m(8),F(9,"date"),a(),c(10,"p",8)(11,"strong"),m(12,"Price:"),a(),m(13),a()()()()),t&2){let r=e.$implicit;s(4),R(r.contact),s(4),C(" ",P(9,3,r.bookedDate,"dd MMM yyyy")," "),s(5),C(" ",r.price,"$ ")}}function J(t,e){if(t&1&&(c(0,"div",2),A(1,q,14,6,"div",3,T),a()),t&2){let r=h();s(),I(r.data.bookings)}}var Y=(()=>{let e=class e{constructor(){this._dialogRef=n(j),this.data=n(B),this.cardConfig={header:{title:{text:"Customer's Reservations",tag:"h3",fontWeight:"700"},position:"center",suffixButton:{label:{text:"Close"},matType:"mat-icon-button",prefixIcon:{icon:"icon_x_circle"},onClick:()=>this._dialogRef.close()}},content:{addClass:"card p-2"},footer:{position:"center",buttons:[{label:{text:"Close"},onClick:()=>this._dialogRef.close(),matType:"mat-flat-button"}]}}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=d({type:e,selectors:[["app-customer-popup"]],standalone:!0,features:[g],decls:3,vars:2,consts:[[3,"config"],[1,"container","my-4"],[1,"row","g-3"],[1,"col-12"],[1,"card","shadow-sm","h-100"],[1,"card-body"],[1,"card-title"],[1,"card-text","mb-1"],[1,"card-text"]],template:function(o,p){o&1&&(c(0,"ks-base-card",0)(1,"div",1),l(2,J,3,0,"div",2),a()()),o&2&&(f("config",p.cardConfig),s(2),u(p.data?2:-1))},dependencies:[U,E],changeDetection:0});let t=e;return t})();var v=(()=>{let e=class e{constructor(){this._networkService=n(G),this._customers$=new y([]),this.customers$=this._customers$.asObservable()}getAllCustomers(){this._networkService.get(K.CUSTOMERS).pipe(S(1)).subscribe(i=>{i&&Array.isArray(i.data)&&this._customers$.next(i.data)})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})();function Q(t,e){if(t&1&&M(0,"ks-basic-grid",0),t&2){let r=h();f("config",r.gridConfig)("refresh$",r.refresh$)}}var ye=(()=>{let e=class e{constructor(){this._destroyRef=n(D),this._dialog=n(N),this._navService=n(W),this._configService=n(L),this._customerService=n(v),this.refresh$=new b}ngOnInit(){this._navService.updateNav({show:!0,back:!1,title:z.LAYOUT.children.CUSTOMERS.name,buttons:[]}),this._initializeGrid(),this._customerService.getAllCustomers()}ngAfterViewInit(){this._customerService.customers$.pipe(O(this._destroyRef)).subscribe(i=>{this.refresh$.next({data:i})})}_initializeGrid(){this.gridConfig={data:k([]),defaultPagination:100,maxTableHeight:this._configService.appConfig.maxTableHeightWithSearch,noDataMessage:{text:"No Customers Found"},features:{showSearch:!0},columns:[{field:"name",title:"Customer Name",type:"string",extraStyles:{"min-width":"170px"}},{title:"Reservations",field:"count",type:"number",extraStyles:{"min-width":"100px","max-width":"100px",width:"100px"}}],actionsColumn:_(x({},this._configService.getActionColumn(1)),{enabled:!0,buttons:[{prefixIcon:{icon:"icon_eye"},label:{text:"View"},onClickFn:i=>this._openCustomerPopup(i),matType:"mat-icon-button"}]})}}_openCustomerPopup(i){this._dialog.open(Y,{width:"95vw",maxWidth:"500px",maxHeight:"95vh",disableClose:!0,autoFocus:!1,restoreFocus:!0,data:i})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=d({type:e,selectors:[["ks-solutions-customers-listing"]],standalone:!0,features:[$([v]),g],decls:1,vars:1,consts:[[3,"config","refresh$"]],template:function(o,p){o&1&&l(0,Q,1,2,"ks-basic-grid",0),o&2&&u(p.gridConfig?0:-1)},dependencies:[H],changeDetection:0});let t=e;return t})();export{ye as CustomersComponent};
