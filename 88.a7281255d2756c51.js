"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[88],{2646:(y,M,o)=>{o.d(M,{n:()=>v,s:()=>n});var t=o(4412),g=o(6697),e=o(4874),E=o(7705),O=o(6004);let n=(()=>{class C{constructor(f){this.networkService=f,this._customers$=new t.t([]),this.customers$=this._customers$.asObservable(),this.changes$=new t.t({})}getAllCustomersNames(){this.networkService.get(e.n.CUSTOMERS).pipe((0,g.s)(1)).subscribe(f=>{f&&Array.isArray(f)&&this._customers$.next(f.sort((P,_)=>_.count-P.count))})}static#t=this.\u0275fac=function(P){return new(P||C)(E.KVO(O.A))};static#e=this.\u0275prov=E.jDH({token:C,factory:C.\u0275fac})}return C})();function v(C){const l=C.split("-");return`${l[2]}/${l[1]}/${l[0]}`}},312:(y,M,o)=>{o.d(M,{y:()=>r});var t=o(9417),g=o(5351),e=o(6834),E=o(785),O=o(6697),n=o(7705),v=o(1010),C=o(177),l=o(4848),f=o(6983),P=o(5574),_=o(4823),R=o(9879);const d=function(){return{icon:"info",ripple:!0}};function D(u,A){if(1&u){const i=n.RV6();n.j41(0,"div",6)(1,"shared-icon",7,8),n.bIt("click",function(){n.eBV(i);const s=n.sdS(2);return n.Njj(s.toggle())}),n.k0s()()}if(2&u){const i=n.XpG();n.R7$(1),n.Y8G("matTooltip",i.getTooltipContent())("matTooltipPosition","left")("config",n.lJ4(3,d))}}const m=function(u){return{title:u,showSave:!0,showCancel:!0}},p=function(u,A){return{label:u,options:A}},T=function(){return{label:"Date",type:"date"}},c=function(){return{label:"Amount in $",type:"number"}},h=function(){return{label:"Notes"}};let r=(()=>{class u{constructor(i,a,s){this.data=i,this._dialogRef=a,this._financeService=s,this.form=new t.gE({title:new t.MJ("",[t.k0.required,t.k0.minLength(5),t.k0.maxLength(25)]),date:new t.MJ("",[t.k0.required]),price:new t.MJ("",[t.k0.required]),notes:new t.MJ("")}),this.revs=[],this.exps=[]}ngOnInit(){this.data&&this.data.data&&(this.editForm(this.data.data),this.loadedData=structuredClone(this.data.data)),"Revenue"===this.data.title?this._financeService.revenues$.pipe((0,O.s)(1)).subscribe(i=>{if(i&&Array.isArray(i)){const a=[];i.forEach(s=>{a.includes(s.title)||a.push(s.title)}),this.revs=a.map(s=>({name:s,value:s}))}}):"Expense"===this.data.title&&this._financeService.expenses$.pipe((0,O.s)(1)).subscribe(i=>{if(i&&Array.isArray(i)){const a=[];i.forEach(s=>{a.includes(s.title)||a.push(s.title)}),this.exps=a.map(s=>({name:s,value:s}))}})}handleDialogActions(i){i&&"ok"!==i&&"cancel"!==i?"save"===i&&this.submit():this._dialogRef.close()}getTooltipContent(){if(this.data&&this.data){let i="";return i=this.data.data.createdAt!==this.data.data.updatedAt?`Created by ${this.data.data.createdBy} at ${(0,e.lh)(this.data.data.createdAt)}\nUpdated by ${this.data.data.updatedBy} at ${(0,e.lh)(this.data.data.updatedAt)}`:`Created by ${this.data.data.createdBy} at ${(0,e.lh)(this.data.data.createdAt)}`,i}return""}editForm(i){this.form.patchValue({title:i.title,date:i.date,price:i.price?.toString(),notes:i.notes})}submit(){if((0,E.v)(this.form)){const i=this.format(this.form.value);this._dialogRef.close(i)}}format(i){const a=this.loadedData?{...this.loadedData}:{date:"",title:""};return a.title=i.title,a.date=this.formatDate(i.date),a.price=Number(i.price),a.notes=i.notes??"",a}formatDate(i){const a=new Date(i);if(isNaN(a.getTime()))return"Invalid Date";const s=a.getDate().toString().padStart(2,"0"),I=(a.getMonth()+1).toString().padStart(2,"0");return`${a.getFullYear()}-${I}-${s}`}static#t=this.\u0275fac=function(a){return new(a||u)(n.rXU(g.Vh),n.rXU(g.CP),n.rXU(v.m))};static#e=this.\u0275cmp=n.VBU({type:u,selectors:[["app-exp-rev-popup"]],decls:12,vars:19,consts:[[3,"config","btnClicked"],[1,"cd-max"],[1,"my-2"],["class","h-100 w-100 d-flex align-items-center justify-content-end pe-3",4,"ngIf"],[3,"config","control"],[3,"disableTypingDate","config","control"],[1,"h-100","w-100","d-flex","align-items-center","justify-content-end","pe-3"],[1,"cursor-pointer",3,"matTooltip","matTooltipPosition","config","click"],["tooltip","matTooltip"]],template:function(a,s){1&a&&(n.j41(0,"shared-confirm-body",0),n.bIt("btnClicked",function(b){return s.handleDialogActions(b)}),n.j41(1,"div",1)(2,"form",2),n.DNE(3,D,3,4,"div",3),n.j41(4,"div",2),n.nrm(5,"shared-autocomplete",4),n.k0s(),n.j41(6,"div",2),n.nrm(7,"shared-input",5),n.k0s(),n.j41(8,"div",2),n.nrm(9,"shared-input",4),n.k0s(),n.j41(10,"div",2),n.nrm(11,"shared-input",4),n.k0s()()()()),2&a&&(n.Y8G("config",n.eq3(11,m,s.data.data?"Edit "+s.data.title:"Add "+s.data.title)),n.R7$(3),n.Y8G("ngIf",s.data.data),n.R7$(2),n.Y8G("config",n.l_i(13,p,s.data.title,"Revenue"===s.data.title?s.revs:s.exps))("control",s.form.controls.title),n.R7$(2),n.Y8G("disableTypingDate",!0)("config",n.lJ4(16,T))("control",s.form.controls.date),n.R7$(2),n.Y8G("config",n.lJ4(17,c))("control",s.form.controls.price),n.R7$(2),n.Y8G("config",n.lJ4(18,h))("control",s.form.controls.notes))},dependencies:[C.bT,t.qT,t.cb,t.cV,l.R,f.S,P.s,_.oV,R.m],styles:[".cd-max[_ngcontent-%COMP%]{max-height:calc(95vh - 170px);overflow-y:scroll}"]})}return u})()},6994:(y,M,o)=>{o.d(M,{_:()=>n});var t=o(7705),g=o(1010),e=o(4848);const E=function(){return{icon:"edit",ripple:!0}},O=function(){return{icon:"delete",ripple:!0}};let n=(()=>{class v{constructor(l){this._financeService=l,this.innerWidth=window.innerWidth}agInit(l){this.cellValue=this.getValueToDisplay(l)}refresh(l){return this.cellValue=this.getValueToDisplay(l),!0}onView(){this._financeService.expChanges$.next({exp:this.rowValue,state:"edit"})}onDelete(){this._financeService.expChanges$.next({exp:this.rowValue,state:"delete"})}getValueToDisplay(l){return this.rowValue=l.data,l.valueFormatted?l.valueFormatted:l.value}static#t=this.\u0275fac=function(f){return new(f||v)(t.rXU(g.m))};static#e=this.\u0275cmp=t.VBU({type:v,selectors:[["expense-value-component"]],decls:3,vars:4,consts:[[1,"h-100","w-100","d-flex","align-items-center","justify-content-center"],[1,"cursor-pointer",3,"config","click"],[1,"cursor-pointer","ms-2",3,"config","click"]],template:function(f,P){1&f&&(t.j41(0,"div",0)(1,"shared-icon",1),t.bIt("click",function(){return P.onView()}),t.k0s(),t.j41(2,"shared-icon",2),t.bIt("click",function(){return P.onDelete()}),t.k0s()()),2&f&&(t.R7$(1),t.Y8G("config",t.lJ4(2,E)),t.R7$(1),t.Y8G("config",t.lJ4(3,O)))},dependencies:[e.R]})}return v})()},5574:(y,M,o)=>{o.d(M,{s:()=>m});var t=o(7705),g=o(9417),e=o(177),E=o(882),O=o(9631),n=o(6600),v=o(850),C=o(1083),l=o(4848),f=o(231);const P=["input"];function _(p,T){if(1&p){const c=t.RV6();t.j41(0,"shared-icon",9),t.bIt("click",function(){t.eBV(c);const r=t.XpG();return t.Njj(r.onIconClick("prefix"))}),t.k0s()}if(2&p){const c=t.XpG();t.Y8G("config",c.config.prefixIcon)}}function R(p,T){if(1&p&&(t.j41(0,"mat-option",10),t.EFF(1),t.k0s()),2&p){const c=T.$implicit;t.xc7("border-bottom","1px solid var(--divider-color)"),t.Y8G("value",c.value),t.R7$(1),t.SpI(" ",c.name," ")}}function d(p,T){if(1&p){const c=t.RV6();t.j41(0,"shared-icon",11),t.bIt("click",function(){t.eBV(c);const r=t.XpG();return t.Njj(r.onIconClick("suffix"))}),t.k0s()}if(2&p){const c=t.XpG();t.Y8G("config",c.config.suffixIcon)}}function D(p,T){if(1&p&&(t.j41(0,"mat-error"),t.nrm(1,"shared-field-validation",12),t.k0s()),2&p){const c=t.XpG();t.R7$(1),t.Y8G("control",c.control)}}let m=(()=>{class p{constructor(){this.control=new g.MJ,this.enableStrict=!1,this.filteredOptions=[],this.iconClickEvent=new t.bkB}ngOnInit(){void 0!==this.config.emptyOption&&this.config.options.unshift({name:this.config.emptyOption,value:void 0}),this.filteredOptions=this.config.options.slice()}onIconClick(c){this.iconClickEvent.emit({type:c})}blur(){const c=this.control.value,h=this.input?.nativeElement;h&&(this.control.setValue(c),h.value=c)}filter(){const c=this.input?.nativeElement?.value?.toLowerCase().trim()??"";this.filteredOptions=this.config.options.filter(h=>h.name.toLowerCase().includes(c))}static#t=this.\u0275fac=function(h){return new(h||p)};static#e=this.\u0275cmp=t.VBU({type:p,selectors:[["shared-autocomplete"]],viewQuery:function(h,r){if(1&h&&t.GBs(P,5),2&h){let u;t.mGM(u=t.lsd())&&(r.input=u.first)}},inputs:{config:"config",control:"control",enableStrict:"enableStrict"},outputs:{iconClickEvent:"iconClickEvent"},decls:12,vars:14,consts:[[1,"shared-select",3,"appearance","color"],["matPrefix","","class","d-flex align-items-center mx-2 cursor-pointer",3,"config","click",4,"ngIf"],["type","text","placeholder","Start Typing ...","matInput","","TextTrimmer","",3,"formControl","matAutocomplete","blur","input","focus"],["input",""],[3,"requireSelection"],["auto","matAutocomplete"],[3,"border-bottom","value",4,"ngFor","ngForOf"],["matSuffix","","class","d-flex align-items-center mx-2 cursor-pointer",3,"config","click",4,"ngIf"],[4,"ngFor","ngForOf"],["matPrefix","",1,"d-flex","align-items-center","mx-2","cursor-pointer",3,"config","click"],[3,"value"],["matSuffix","",1,"d-flex","align-items-center","mx-2","cursor-pointer",3,"config","click"],[3,"control"]],template:function(h,r){if(1&h&&(t.j41(0,"mat-form-field",0),t.DNE(1,_,1,1,"shared-icon",1),t.j41(2,"mat-label"),t.EFF(3),t.k0s(),t.j41(4,"input",2,3),t.bIt("blur",function(){return r.blur()})("input",function(){return r.filter()})("focus",function(){return r.filter()}),t.k0s(),t.j41(6,"mat-autocomplete",4,5),t.DNE(8,R,2,4,"mat-option",6),t.k0s(),t.DNE(9,d,1,1,"shared-icon",7),t.DNE(10,D,2,1,"mat-error",8),t.nI1(11,"keyvalue"),t.k0s()),2&h){const u=t.sdS(7);t.AVh("hide-extra",r.config.hideExtra),t.Y8G("appearance",r.config.appearance?r.config.appearance:"outline")("color",r.config.color?r.config.color:"primary"),t.R7$(1),t.Y8G("ngIf",r.config.prefixIcon),t.R7$(2),t.JRh(r.config.label),t.R7$(1),t.Y8G("formControl",r.control)("matAutocomplete",u),t.R7$(2),t.Y8G("requireSelection",r.enableStrict),t.R7$(2),t.Y8G("ngForOf",r.filteredOptions),t.R7$(1),t.Y8G("ngIf",r.config.suffixIcon),t.R7$(1),t.Y8G("ngForOf",t.bMT(11,12,r.control.errors))}},dependencies:[e.Sq,e.bT,g.me,g.BC,g.l_,E.rl,E.nJ,E.TL,E.JW,E.yw,O.fg,n.wT,v.$3,v.pN,C.c,l.R,f.D,e.lG],styles:[".shared-select[_ngcontent-%COMP%]{width:100%}.hide-extra[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}"]})}return p})()},9751:(y,M,o)=>{o.d(M,{r:()=>P});var t=o(5351),g=o(1349),e=o(7705),E=o(177),O=o(4848),n=o(8930);function v(_,R){if(1&_&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&_){const d=e.XpG();e.R7$(1),e.SpI(" ",d.data.bodyMessage," ")}}function C(_,R){if(1&_){const d=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"shared-button",10),e.bIt("btnClicked",function(){e.eBV(d);const m=e.XpG();return e.Njj(m.yesClicked())}),e.k0s()(),e.j41(3,"div",9)(4,"shared-button",10),e.bIt("btnClicked",function(){e.eBV(d);const m=e.XpG();return e.Njj(m.noClicked())}),e.k0s()()()}if(2&_){const d=e.XpG();e.R7$(2),e.Y8G("config",d.yesButtonConfig),e.R7$(2),e.Y8G("config",d.noButtonConfig)}}function l(_,R){if(1&_){const d=e.RV6();e.j41(0,"div",11)(1,"shared-button",10),e.bIt("btnClicked",function(){e.eBV(d);const m=e.XpG();return e.Njj(m.okClicked())}),e.k0s()()}if(2&_){const d=e.XpG();e.R7$(1),e.Y8G("config",d.okButtonConfig)}}const f=function(){return{icon:"close",color:"var(--text-color)"}};let P=(()=>{class _{constructor(d,D){this.dialogRef=d,this.data=D,this.appName=(0,g.$L)("constants",!0)?.appName?(0,g.$L)("constants",!0)?.appName:"P.O.S",this.okButtonConfig={label:"OK",type:"button",color:"primary",matAttribute:"mat-raised-button"},this.yesButtonConfig={label:"Yes",color:"primary",matAttribute:"mat-raised-button",takeFullWidth:!0},this.noButtonConfig={label:"No",color:"primary",matAttribute:"mat-raised-button",takeFullWidth:!0}}yesClicked(){this.dialogRef.close("yes")}noClicked(){this.dialogRef.close("no")}okClicked(){this.dialogRef.close("ok")}closeClicked(){this.dialogRef.close()}static#t=this.\u0275fac=function(D){return new(D||_)(e.rXU(t.CP),e.rXU(t.Vh))};static#e=this.\u0275cmp=e.VBU({type:_,selectors:[["ng-component"]],decls:11,vars:6,consts:[[2,"border-radius","7px 7px 0 0"],[1,"cs-pop-title","d-flex","justify-content-between","py-2","px-4","text-light","align-items-center"],[2,"cursor","pointer",3,"config","click"],[2,"display","flex","border-top","1px solid gainsboro","margin","0px"],[1,"text-center","py-2","px-2",2,"min-height","70px"],[4,"ngIf"],["class","py-2 align-items-center justify-content-center d-flex",4,"ngIf"],["class","py-2 text-center",4,"ngIf"],[1,"py-2","align-items-center","justify-content-center","d-flex"],[1,"mx-1",2,"width","120px"],[3,"config","btnClicked"],[1,"py-2","text-center"]],template:function(D,m){1&D&&(e.j41(0,"div",0)(1,"div",1)(2,"div"),e.EFF(3),e.k0s(),e.j41(4,"shared-icon",2),e.bIt("click",function(){return m.closeClicked()}),e.k0s()(),e.nrm(5,"div",3),e.j41(6,"div",4),e.DNE(7,v,2,1,"div",5),e.k0s(),e.nrm(8,"div",3),e.DNE(9,C,5,2,"div",6),e.DNE(10,l,2,1,"div",7),e.k0s()),2&D&&(e.R7$(3),e.JRh(m.data.title?m.data.title:m.appName),e.R7$(1),e.Y8G("config",e.lJ4(5,f)),e.R7$(3),e.Y8G("ngIf",m.data.bodyMessage),e.R7$(2),e.Y8G("ngIf",1==m.data.showYesNo),e.R7$(1),e.Y8G("ngIf",1==m.data.showOk))},dependencies:[E.bT,O.R,n.Q],styles:[".cs-pop-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600}.cs-pop-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:var(--text-color)}"]})}return _})()}}]);