import{a as U,b as oe}from"./chunk-H62IVGHA.js";import{a as z,b as re}from"./chunk-QHM7Z56U.js";import{a as G,b as ie}from"./chunk-DQYI455W.js";import{c as B,d as ee}from"./chunk-GRXY2UCV.js";import{a as _,b as ne}from"./chunk-UOQFKZ5Q.js";import{a as O,b as Z}from"./chunk-AOMHIDTB.js";import{a as L,b as te}from"./chunk-DKBVEZ2J.js";import{Ca as j,Fa as V,Ra as W,Ua as H,V as P,W as $,Wa as C,X as Q,ma as N,oa as X}from"./chunk-OZNJVQIE.js";import{$b as S,Ab as v,Fb as h,Ga as k,Lb as x,M as p,Qb as s,Rb as c,Sb as F,Vc as d,a as b,b as E,ba as D,e as w,fa as A,ib as a,kc as l,la as r,mc as m,n as R,o as I,pa as u,rc as M,sc as g,tb as T}from"./chunk-LUSYJMV7.js";function ae(i,e){if(i&1&&(s(0,"div",1)(1,"ul",2)(2,"li",3),l(3),c(),s(4,"li",3),l(5),c(),s(6,"li",3),l(7),c(),s(8,"li",3),l(9),c(),s(10,"li",3),l(11),c(),s(12,"li",3),l(13),c(),s(14,"li",3),l(15),c(),s(16,"li",3),l(17),c(),s(18,"li",3),l(19),c()()()),i&2){let n=S();a(3),m("Customer Name: ",n.data.name,""),a(2),m("Experience: ",n.data.experience," / 5 stars"),a(2),m("Cleanliness: ",n.data.cleanliness," / 5 stars"),a(2),m("Comfort: ",n.data.comfort," / 5 stars"),a(2),m("Amenities: ",n.data.amenities," / 5 stars"),a(2),m("Customer Service: ",n.data.customerService," / 5 stars"),a(2),m("Recommend: ",n.data.recommend?"Yes":"No",""),a(2),m("Improvement: ",n.data.improvement?n.data.improvement:"N/A",""),a(2),m("Comments: ",n.data.comments?n.data.comments:"N/A","")}}var Y,q=w(()=>{"use strict";d();Q();C();d();Y=(()=>{let e=class e{constructor(){this._dialogRef=r(P),this.data=r($),this.cardConfig={header:{title:{text:"Customer Review",tag:"h3",fontWeight:"700"},position:"center",suffixButton:{label:{text:"Close"},matType:"mat-icon-button",prefixIcon:{icon:"icon_x_circle"},onClick:()=>this._dialogRef.close()}},content:{addClass:"card p-2"},footer:{position:"center",buttons:[{label:{text:"Close"},onClick:()=>this._dialogRef.close(),matType:"mat-flat-button"}]}}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=u({type:e,selectors:[["app-review-popup"]],standalone:!0,features:[g],decls:2,vars:2,consts:[[3,"config"],[1,"container","py-2","cd-max"],[1,"row","text-start"],[1,"cs-r"]],template:function(o,f){o&1&&(s(0,"ks-base-card",0),v(1,ae,20,9,"div",1),c()),o&2&&(h("config",f.cardConfig),a(),x(f.data?1:-1))},dependencies:[W],styles:[".cs-r[_ngcontent-%COMP%]{padding:7px;font-size:16px}"],changeDetection:0});let i=e;return i})()});var y,J=w(()=>{"use strict";d();C();D();ne();re();d();y=(()=>{let e=class e{constructor(){this._networkService=r(V),this._reviews$=new I([]),this.reviews$=this._reviews$.asObservable()}getAllReviews(){this._networkService.get(_.REVIEWS).pipe(p(1)).subscribe(t=>{t&&Array.isArray(t.data)&&this._reviews$.next(t.data)})}deleteReview(t){this._networkService.delete(_.REVIEWS,void 0,t._id).pipe(p(1)).subscribe(()=>{z.UpdateArrayBehaviorSubject(this._reviews$,t,"delete","_id")})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac});let i=e;return i})()});function se(i,e){if(i&1&&F(0,"ks-basic-grid",0),i&2){let n=S();h("config",n.gridConfig)("refresh$",n.refresh$)}}var $e,ce=w(()=>{d();X();C();D();q();J();te();oe();Z();ee();ie();d();$e=(()=>{let e=class e{constructor(){this._destroyRef=r(k),this._dialog=r(j),this._navService=r(O),this._configService=r(U),this._reviewsService=r(y),this._sessionService=r(B),this._canDelete=this._sessionService.checkAccess(G.DELETE_REVIEWS),this.refresh$=new R}ngOnInit(){this._navService.updateNav({show:!0,back:!1,title:L.LAYOUT.children.REVIEWS.name,buttons:[]}),this._reviewsService.getAllReviews(),this._initializeGrid()}ngAfterViewInit(){this._reviewsService.reviews$.pipe(N(this._destroyRef)).subscribe(t=>{this.refresh$.next({data:t})})}_initializeGrid(){this.gridConfig={data:T([]),defaultPagination:100,maxTableHeight:this._configService.appConfig.maxTableHeightWithSearch,noDataMessage:{text:"No Reviews Found"},features:{showSearch:!0},columns:[{field:"name",title:"Customer Name",type:"string",extraStyles:{"min-width":"170px","max-width":"170px",width:"170px"}},{title:"Experience",field:"experience",type:"number",extraStyles:{"min-width":"100px"},suffix:" / 5 stars"},{title:"Cleanliness",field:"cleanliness",type:"number",extraStyles:{"min-width":"100px"},suffix:" / 5 stars"},{title:"Comfort",field:"comfort",type:"number",extraStyles:{"min-width":"80px"},suffix:" / 5 stars"},{title:"Amenities",field:"amenities",type:"number",extraStyles:{"min-width":"90px"},suffix:" / 5 stars"},{title:"Customer Service",field:"customerService",type:"number",extraStyles:{"min-width":"140px"},suffix:" / 5 stars"},{field:"createdAt",title:"Date",type:"date",dateFormat:"dd/MM/yyyy - HH:mm:ss a",extraStyles:{"min-width":"170px","max-width":"170px",width:"170px"}}],actionsColumn:E(b({},this._configService.getActionColumn(2)),{enabled:!0,buttons:[{prefixIcon:{icon:"icon_eye"},label:{text:"View"},onClickFn:t=>this._openReviewPopup(t),matType:"mat-icon-button"},{prefixIcon:{icon:"icon_delete"},color:"warn",label:{text:"Delete"},onClickFn:t=>this._deleteReview(t),matType:"mat-icon-button",isVisibleFn:()=>this._canDelete}]})}}_openReviewPopup(t){this._dialog.open(Y,{width:"95vw",maxWidth:"500px",maxHeight:"95vh",disableClose:!0,autoFocus:!1,restoreFocus:!0,data:t})}_deleteReview(t){this._dialog.openConfirmPopup({title:{text:"Confirm Delete"},message:{text:"Are you sure you want to delete this review?"}}).afterClosed().pipe(p(1)).subscribe(o=>{o&&t?._id&&this._reviewsService.deleteReview(t)})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=u({type:e,selectors:[["ks-solutions-reviews-listing"]],standalone:!0,features:[M([y]),g],decls:1,vars:1,consts:[[3,"config","refresh$"]],template:function(o,f){o&1&&v(0,se,1,2,"ks-basic-grid",0),o&2&&x(f.gridConfig?0:-1)},dependencies:[H],changeDetection:0});let i=e;return i})()});ce();export{$e as ReviewsComponent};
