import{a as J,b as se}from"./chunk-GXCC2ORA.js";import{a as q,b as ae}from"./chunk-UOQFKZ5Q.js";import{a as V,b as ne}from"./chunk-I6XSNUQR.js";import{a as Y,b as re}from"./chunk-DKBVEZ2J.js";import{Ba as z,Na as K,Qa as L,Sa as _,V as G,W as U,X as ie,ma as H,oa as oe,ya as W}from"./chunk-P2MZAAVA.js";import{$b as g,Ab as f,Bc as B,Dc as O,Fb as u,Ga as I,Lb as h,M as k,Mb as R,Ob as $,Pb as F,Qb as c,Rb as a,Sb as P,Vc as p,a as y,b as S,ba as T,e as v,fa as A,fd as N,ib as s,kc as m,la as n,lc as E,mc as x,md as te,n as w,o as D,pa as l,rc as j,sc as C,tb as M}from"./chunk-LUSYJMV7.js";function ce(t,e){if(t&1&&(c(0,"div",3)(1,"div",4)(2,"div",5)(3,"h5",6),m(4),a(),c(5,"p",7)(6,"strong"),m(7,"Date:"),a(),m(8),B(9,"date"),a(),c(10,"p",8)(11,"strong"),m(12,"Price:"),a(),m(13),a()()()()),t&2){let r=e.$implicit;s(4),E(r.contact),s(4),x(" ",O(9,3,r.bookedDate,"dd MMM yyyy")," "),s(5),x(" ",r.price,"$ ")}}function me(t,e){if(t&1&&(c(0,"div",2),$(1,ce,14,6,"div",3,R),a()),t&2){let r=g();s(),F(r.data.bookings)}}var X,Z=v(()=>{"use strict";te();p();ie();_();p();X=(()=>{let e=class e{constructor(){this._dialogRef=n(G),this.data=n(U),this.cardConfig={header:{title:{text:"Customer's Reservations",tag:"h3",fontWeight:"700"},position:"center",suffixButton:{label:{text:"Close"},matType:"mat-icon-button",prefixIcon:{icon:"icon_x_circle"},onClick:()=>this._dialogRef.close()}},content:{addClass:"card p-2"},footer:{position:"center",buttons:[{label:{text:"Close"},onClick:()=>this._dialogRef.close(),matType:"mat-flat-button"}]}}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=l({type:e,selectors:[["app-customer-popup"]],standalone:!0,features:[C],decls:3,vars:2,consts:[[3,"config"],[1,"container","my-4"],[1,"row","g-3"],[1,"col-12"],[1,"card","shadow-sm","h-100"],[1,"card-body"],[1,"card-title"],[1,"card-text","mb-1"],[1,"card-text"]],template:function(o,d){o&1&&(c(0,"ks-base-card",0)(1,"div",1),f(2,me,3,0,"div",2),a()()),o&2&&(u("config",d.cardConfig),s(2),h(d.data?2:-1))},dependencies:[K,N],changeDetection:0});let t=e;return t})()});var b,ee=v(()=>{"use strict";p();_();T();ae();p();b=(()=>{let e=class e{constructor(){this._networkService=n(z),this._customers$=new D([]),this.customers$=this._customers$.asObservable()}getAllCustomers(){this._networkService.get(q.CUSTOMERS).pipe(k(1)).subscribe(i=>{i&&Array.isArray(i.data)&&this._customers$.next(i.data)})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})()});function pe(t,e){if(t&1&&P(0,"ks-basic-grid",0),t&2){let r=g();u("config",r.gridConfig)("refresh$",r.refresh$)}}var je,de=v(()=>{p();oe();_();T();Z();ee();re();se();ne();p();je=(()=>{let e=class e{constructor(){this._destroyRef=n(I),this._dialog=n(W),this._navService=n(V),this._configService=n(J),this._customerService=n(b),this.refresh$=new w}ngOnInit(){this._navService.updateNav({show:!0,back:!1,title:Y.LAYOUT.children.CUSTOMERS.name,buttons:[]}),this._initializeGrid(),this._customerService.getAllCustomers()}ngAfterViewInit(){this._customerService.customers$.pipe(H(this._destroyRef)).subscribe(i=>{this.refresh$.next({data:i})})}_initializeGrid(){this.gridConfig={data:M([]),defaultPagination:100,maxTableHeight:this._configService.appConfig.maxTableHeightWithSearch,noDataMessage:{text:"No Customers Found"},features:{showSearch:!0},columns:[{field:"name",title:"Customer Name",type:"string",extraStyles:{"min-width":"170px"}},{title:"Reservations",field:"count",type:"number",extraStyles:{"min-width":"100px","max-width":"100px",width:"100px"}}],actionsColumn:S(y({},this._configService.getActionColumn(1)),{enabled:!0,buttons:[{prefixIcon:{icon:"icon_eye"},label:{text:"View"},onClickFn:i=>this._openCustomerPopup(i),matType:"mat-icon-button"}]})}}_openCustomerPopup(i){this._dialog.open(X,{width:"95vw",maxWidth:"500px",maxHeight:"95vh",disableClose:!0,autoFocus:!1,restoreFocus:!0,data:i})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=l({type:e,selectors:[["ks-solutions-customers-listing"]],standalone:!0,features:[j([b]),C],decls:1,vars:1,consts:[[3,"config","refresh$"]],template:function(o,d){o&1&&f(0,pe,1,2,"ks-basic-grid",0),o&2&&h(d.gridConfig?0:-1)},dependencies:[L],changeDetection:0});let t=e;return t})()});de();export{je as CustomersComponent};
