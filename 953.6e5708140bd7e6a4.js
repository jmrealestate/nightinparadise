"use strict";(self.webpackChunknight_in_paradise=self.webpackChunknight_in_paradise||[]).push([[953],{8953:(O,m,t)=>{t.r(m),t.d(m,{ReservationModule:()=>M});var l=t(4755),o=t(5030),p=t(2722),u=t(5698),v=t(3772),h=t(5076),c=t(7732),d=t(978),f=t(6073),g=t(9234),e=t(9523),x=t(1241),I=t(6831),R=t(4810),b=t(3877),C=t(942),J=t(8152),N=t(1977),Z=t(5512),E=t(9997);function y(n,a){if(1&n&&(e.TgZ(0,"div",11),e._UZ(1,"shared-suggestions-text-input",12),e.qZA()),2&n){const s=a.ngIf;e.xp6(1),e.Q6J("label","Name")("options",s)}}function A(n,a){if(1&n&&e._UZ(0,"shared-text-input",3),2&n){const s=e.oxw();e.Q6J("control",s.form.controls.notes)("label","Notes")}}function T(n,a){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&n){const s=a.ngIf;e.xp6(1),e.hij(" ",s&&s," ")}}let D=(()=>{class n extends v.f{constructor(s,r){super(),this._store=s,this._confirm=r,this.$=this._store.select(d.X3).pipe((0,p.R)(this.unsubscribe$)).subscribe(i=>{this.reservation=structuredClone(i),this.popover={createdAt:i.createdAt,createdBy:i.createdBy,updatedAt:i.updatedAt,updatedBy:i.updatedBy}}),this.$$=this._store.select(h.dy).pipe((0,p.R)(this.unsubscribe$)).subscribe(i=>{this.isEditor=!(!i.roles.includes(2001)&&!i.roles.includes(5150))}),this.addError$=this._store.select(d.h4),this.addStatus$=this._store.select(d.lY),this.names$=this._store.select(d.eJ),this.form=new o.cw({bookedDate:new o.NI({value:this.reservation.bookedDate,disabled:!0}),person:new o.cw({name:new o.NI({value:this.reservation.person.name,disabled:!this.isEditor},[o.kI.required,o.kI.minLength(5),o.kI.maxLength(25)]),contact:new o.NI({value:this.reservation.person.contact,disabled:!this.isEditor},[o.kI.required,o.kI.minLength(5),o.kI.maxLength(25)])}),notes:new o.NI(this.reservation.notes),price:new o.NI({value:this.reservation.price,disabled:!this.isEditor},[o.kI.required]),done:new o.NI(this.reservation.done)})}editReservation(){(0,f.G)(this.form)&&this._store.dispatch((0,c.UD)({reservation:{bookedDate:this.reservation.bookedDate,number:this.reservation.number,notes:this.form.value.notes,person:{contact:this.form.value.person?.contact,name:this.form.value.person?.name},price:this.form.value.price,_id:this.reservation._id,done:this.form.value.done}}))}DeleteReservation(){this._confirm.openConfirm(g.l.RESERVATIONS.CONFIRM_DELETE).pipe((0,u.q)(2)).subscribe(s=>{!0===s&&this._store.dispatch((0,c.aL)({reservation:this.reservation}))})}}return n.\u0275fac=function(s){return new(s||n)(e.Y36(x.yh),e.Y36(I.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-reservation"]],features:[e.qOj],decls:17,vars:21,consts:[["autocomplete","off",1,"cs-text-bg-dark","text-light","pt-3","px-3","rounded-4","d-flex","flex-column",3,"formGroup","ngSubmit"],[3,"label","content","on"],["formGroupName","person",4,"ngIf"],[3,"control","label"],[3,"control"],[3,"control","label",4,"ngIf"],[1,"form-check"],["type","checkbox","id","flexCheckIndeterminate",1,"form-check-input",3,"formControl","disabled"],["for","flexCheckIndeterminate",1,"form-check-label"],[3,"disabled","showDelete","deleteReq"],["class","text-danger text-center",4,"ngIf"],["formGroupName","person"],["formControlName","name",3,"label","options"],[1,"text-danger","text-center"]],template:function(s,r){1&s&&(e.TgZ(0,"shared-modal")(1,"form",0),e.NdJ("ngSubmit",function(){return r.editReservation()}),e._UZ(2,"shared-popover",1),e.YNc(3,y,2,2,"div",2),e.ALo(4,"async"),e._UZ(5,"shared-text-input",3)(6,"shared-date-input",4)(7,"shared-price-input",4),e.YNc(8,A,1,2,"shared-text-input",5),e.TgZ(9,"div",6),e._UZ(10,"input",7),e.TgZ(11,"label",8),e._uU(12," Done "),e.qZA()(),e.TgZ(13,"shared-button",9),e.NdJ("deleteReq",function(){return r.DeleteReservation()}),e.ALo(14,"async"),e.qZA(),e.YNc(15,T,2,1,"div",10),e.ALo(16,"async"),e.qZA()()),2&s&&(e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(1),e.Q6J("label","Reservation")("content",r.popover)("on",r.isEditor),e.xp6(1),e.Q6J("ngIf",e.lcZ(4,15,r.names$)),e.xp6(2),e.Q6J("control",r.form.controls.person.controls.contact)("label","Contact Info"),e.xp6(1),e.Q6J("control",r.form.controls.bookedDate),e.xp6(1),e.Q6J("control",r.form.controls.price),e.xp6(1),e.Q6J("ngIf",r.isEditor),e.xp6(2),e.Q6J("formControl",r.form.controls.done)("disabled",!r.isEditor),e.xp6(3),e.Q6J("disabled","Loading"===e.lcZ(14,17,r.addStatus$))("showDelete",!0),e.xp6(2),e.Q6J("ngIf",e.lcZ(16,19,r.addError$)))},dependencies:[l.O5,R.t,b.S,C.L,J.Y,o._Y,o.Wl,o.JJ,o.JL,o.oH,o.sg,o.u,o.x0,N.z,Z.U,E.w,l.Ov]}),n})();var L=t(5784),Q=t(8454),U=t(4267),$=t(7257),S=t(2280),Y=t(1528),B=t(5305),z=t(5203);const G=[{path:"",component:D}];let M=(()=>{class n{}return n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,L.N,Y.X,Q.b,U.I,o.UX,$.z,B.U,z.o,S.Bz.forChild(G)]}),n})()}}]);